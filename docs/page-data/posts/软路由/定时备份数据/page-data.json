{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/软路由/定时备份数据","result":{"data":{"siYuan":{"excerpt":"定时备份数据 为了防止硬盘的损坏，因此需要定时将数据同步到阿里云盘中。。。。 通过 rclone 命令将定时任务挂载到阿里云盘中。 在配置 rclone 的时候，如果是 webdav 一定要选择 webdav，而不能选择 http，如果选择...","raw":"# 定时备份数据\n\n为了防止硬盘的损坏，因此需要定时将数据同步到阿里云盘中。。。。\n\n通过 rclone 命令将定时任务挂载到阿里云盘中。\n\n在配置 rclone 的时候，如果是 webdav 一定要选择 webdav，而不能选择 http，如果选择了 http 协议在挂载和读取的过程中没有任何问题，但是在上传文件的时候会爆出权限异常，`http remotes are read only`\n\nrclone 同步的命令是:\n\n```shell\n# transfers 指定同时上传数量\nrclone sync /home ali:/omv/back/home --transfers=8 -P\n```\n\n将 rclone 配置成服务:\n\n```shell\nvim /etc/systemd/system/backup.service\n\n[Unit]\nDescription=backup\nAfter=network.target\n\n[Service]\nType=oneshot\nUser=root\nExecStart=/usr/bin/rclone sync /home ali:/omv/back/home --transfers=8 -P\nRestart=on-failure\n\n[Install]\nWantedBy=multi-user.target\n```\n\n将 rclone 配置成定时任务:\n\n```shell\nvim /etc/systemd/system/backup.timer\n\n[Unit]\nDescription=backUp Timer\n\n[Timer]\nOnUnitActiveSec=1h\nUnit=backup.service\n\n[Install]\nWantedBy=multi-user.target\n```\n\n之后只需要开启定时任务即可:\n\n```shell\nsystemctl daemon-reload\nsystemctl enable backup.timer\nsystemctl start backup.timer\n```\n\n如果不放心，手动启动一遍看有没有错:\n\n```shell\nsystemctl start backup\n# 查看状态\nsystemctl status backup\n# 连续打印日志\njournalctl -u backup -n 20 -f\n```\n","field":{"slug":"/posts/软路由/定时备份数据"},"frontmatter":{"title":"定时备份数据","tags":["软路由"],"date":"2022-04-21","description":"定时备份数据 为了防止硬盘的损坏，因此需要定时将数据同步到阿里云盘中。。。。 通过 rclone 命令将定时任务挂载到阿里云盘中。 在配置 rclone 的时候，如果是 webdav 一定要选择 webdav，而不能选择 http，如果选择..."}},"prev":{"frontmatter":{"title":"posts"},"field":{"slug":"/posts"}},"next":{"frontmatter":{"title":"记录一次NAS系统崩溃"},"field":{"slug":"/posts/软路由/记录一次NAS系统崩溃"}}},"pageContext":{"slug":"/posts/软路由/定时备份数据","prevSlug":"/posts","nextSlug":"/posts/软路由/记录一次NAS系统崩溃"}},"staticQueryHashes":["1284643331","2841359383"]}