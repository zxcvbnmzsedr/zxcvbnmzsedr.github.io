(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{459:function(s,a,t){"use strict";t.r(a);var n=t(7),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"字节码结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字节码结构"}},[s._v("#")]),s._v(" 字节码结构")]),s._v(" "),a("p",[s._v("计算机是不能直接运行java代码的，必须要先运行java虚拟机，再由java虚拟机运行编译后的java代码。这个编译后的java代码，就是java字节码，文件后缀名为.class。")]),s._v(" "),a("p",[s._v("为什么jvm不能直接运行java代码呢，这是因为在cpu层面看来计算机中所有的操作都是一个个指令的运行汇集而成的，java是高级语言，只有人类才能理解其逻辑，计算机是无法识别的，所以java代码必须要先编译成字节码文件，jvm才能正确识别代码转换后的指令并将其运行。")]),s._v(" "),a("ul",[a("li",[s._v("Java代码间接翻译成字节码，储存字节码的文件再交由运行于不同平台上的JVM虚拟机去读取执行，从而实现一次编写，到处运行的目的。")]),s._v(" "),a("li",[s._v("JVM也不再只支持Java，由此衍生出了许多基于JVM的编程语言，如Groovy, Scala, Koltin等等。")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://image.ztianzeng.com/uPic/20220817171126.png",alt:""}}),s._v("​")]),s._v(" "),a("h2",{attrs:{id:"java字节码文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#java字节码文件"}},[s._v("#")]),s._v(" Java字节码文件")]),s._v(" "),a("p",[s._v("class文件本质上是一个以8位字节为基础单位的二进制流，各个数据项目严格按照顺序紧凑的排列在class文件中。jvm根据其特定的规则解析该二进制数据，从而得到相关信息。")]),s._v(" "),a("p",[s._v("Class文件采用一种伪结构来存储数据，它有两种类型：无符号数和表。这里暂不详细的讲。")]),s._v(" "),a("p",[s._v("本文将通过简单的java例子编译后的文件来理解。")]),s._v(" "),a("h3",{attrs:{id:"class文件的结构属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#class文件的结构属性"}},[s._v("#")]),s._v(" Class文件的结构属性")]),s._v(" "),a("p",[s._v("在理解之前先从整体看下java字节码文件包含了哪些类型的数据：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://image.ztianzeng.com/uPic/20220817171153.png",alt:""}}),s._v("​")]),s._v(" "),a("h3",{attrs:{id:"从一个例子开始"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从一个例子开始"}},[s._v("#")]),s._v(" 从一个例子开始")]),s._v(" "),a("p",[s._v("下面以一个简单的例子来逐步讲解字节码。")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//Main.java")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Main")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("inc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" m "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])])]),a("p",[s._v("通过以下命令, 可以在当前所在路径下生成一个Main.class文件。")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("javac "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("java\n")])])]),a("p",[s._v("以文本的形式打开生成的class文件，内容如下:")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("cafe babe "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0034")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0013")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("a00 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0400")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0f")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("09")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0003")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0010")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0700")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1107")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0012")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0100")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("016d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0100")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0149")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0100")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("063")]),s._v("c "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("696")]),s._v("e "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6974")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3e01")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0003")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2829")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5601")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0004")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("436f")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6465")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0100")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0f")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("c "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("696")]),s._v("e "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("654")]),s._v("e\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("756d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6265")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7254")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6162")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("c65 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0100")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0369")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6e63")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0100")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0328")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2949")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0100")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("a53 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6f")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("75")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7263")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6546")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("696")]),s._v("c "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6501")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0009")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4d")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("61")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("696")]),s._v("e "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2e6")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6176")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("610")]),s._v("c\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0007")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0008")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("c00 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0500")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0601")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0010")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("636f")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6d")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2f")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7268")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7974")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("686d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("372f")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4d")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("61")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("696")]),s._v("e "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0100")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("106")]),s._v("a\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6176")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("612f")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("c61 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6e67")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2f")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4f")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("626")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6563")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7400")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2100")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0300")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0400")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0100")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0200")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0500")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0600")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0200")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0100")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0700")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0800")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0100")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0900")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1d")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("00")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0100")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0100")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("052")]),s._v("a b700 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("01")]),s._v("b1 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("000")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0006")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0003")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0001")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("000")]),s._v("b "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("000")]),s._v("c "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0009")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("001f")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0002")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0001")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0007")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("ab4 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0002")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0460")]),s._v(" ac00 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0100")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("a00 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0600")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0100")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0800")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0100")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0d")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("00")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0200")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("e\n")])])]),a("ul",[a("li",[s._v('文件开头的4个字节("cafe babe")称之为 '),a("code",[s._v("魔数")]),s._v('，唯有以"cafe babe"开头的class文件方可被虚拟机所接受，这4个字节就是字节码文件的身份识别。')]),s._v(" "),a("li",[s._v("0000是编译器jdk版本的次版本号0，0034转化为十进制是52,是主版本号，java的版本号从45开始，除1.0和1.1都是使用45.x外,以后每升一个大版本，版本号加一。也就是说，编译生成该class文件的jdk版本为1.8.0。")])]),s._v(" "),a("p",[s._v("通过java -version命令稍加验证, 可得结果。")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Java")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TM")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Runtime")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Environment")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("build "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.8")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0_131")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("b11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Java")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HotSpot")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TM")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Bit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Server")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VM")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("build "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25.131")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("b11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mixed mode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("p",[s._v("继续往下是常量池... 知道是这么分析的就可以了，然后我们通过工具反编译字节码文件继续去看。")]),s._v(" "),a("h3",{attrs:{id:"反编译字节码文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#反编译字节码文件"}},[s._v("#")]),s._v(" 反编译字节码文件")]),s._v(" "),a("blockquote",[a("p",[s._v("使用到java内置的一个反编译工具javap可以反编译字节码文件, 用法: "),a("code",[s._v("javap <options> <classes>")])])]),s._v(" "),a("p",[s._v("其中"),a("code",[s._v("<options>")]),s._v("options选项包括:")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("help  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("help  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("        输出此用法消息\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("version                 版本信息\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("v  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("verbose             输出附加信息\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("l                       输出行号和本地变量表\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v("                  仅显示公共类和成员\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("protected")]),s._v("               显示受保护的"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("公共类和成员\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v("                 显示程序包"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("受保护的"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("公共类\n                           和成员 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("默认"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v("             显示所有类和成员\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("c                       对代码进行反汇编\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("s                       输出内部类型签名\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sysinfo                 显示正在处理的类的\n                           系统信息 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("路径"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 大小"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 日期"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MD5")]),s._v(" 散列"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("constants               显示最终常量\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("classpath "),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("        指定查找用户类文件的位置\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cp "),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("               指定查找用户类文件的位置\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bootclasspath "),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("    覆盖引导类文件的位置\n")])])]),a("p",[s._v("输入命令"),a("code",[s._v("javap -verbose -p Main.class")]),s._v("查看输出内容:")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Classfile")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("E")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JavaCode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TestProj")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("production"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TestProj")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rhythm7"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Last")]),s._v(" modified "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" size "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("362")]),s._v(" bytes\n  "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MD5")]),s._v(" checksum "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("aed8540b098992663b7ba08c65312de\n  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Compiled")]),s._v(" from "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Main.java"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("rhythm7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("Main")]),s._v("\n  minor version"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  major version"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v("\n  flags"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ACC_PUBLIC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ACC_SUPER")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Constant")]),s._v(" pool"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n   #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Methodref")]),s._v("          #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.")]),s._v("#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// java/lang/Object."<init>":()V')]),s._v("\n   #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Fieldref")]),s._v("           #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.")]),s._v("#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// com/rhythm7/Main.m:I")]),s._v("\n   #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Class")]),s._v("              #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// com/rhythm7/Main")]),s._v("\n   #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Class")]),s._v("              #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// java/lang/Object")]),s._v("\n   #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Utf8")]),s._v("               m\n   #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Utf8")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("I")]),s._v("\n   #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Utf8")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("init"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n   #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Utf8")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),s._v("\n   #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Utf8")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Code")]),s._v("\n  #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Utf8")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LineNumberTable")]),s._v("\n  #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Utf8")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LocalVariableTable")]),s._v("\n  #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Utf8")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),s._v("\n  #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Utf8")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Lcom")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rhythm7"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Utf8")]),s._v("               inc\n  #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Utf8")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("I")]),s._v("\n  #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Utf8")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SourceFile")]),s._v("\n  #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Utf8")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("java\n  #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("NameAndType")]),s._v("        #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// "<init>":()V')]),s._v("\n  #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("NameAndType")]),s._v("        #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// m:I")]),s._v("\n  #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Utf8")]),s._v("               com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rhythm7"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Main")]),s._v("\n  #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Utf8")]),s._v("               java"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    descriptor"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("I")]),s._v("\n    flags"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ACC_PRIVATE")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("rhythm7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("Main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    descriptor"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),s._v("\n    flags"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ACC_PUBLIC")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Code")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      stack"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" locals"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" args_size"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" aload_0\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" invokespecial #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// Method java/lang/Object."<init>":()V')]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LineNumberTable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        line "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LocalVariableTable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Start")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Length")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Slot")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Name")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Signature")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Lcom")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rhythm7"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("inc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    descriptor"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("I")]),s._v("\n    flags"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ACC_PUBLIC")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Code")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      stack"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" locals"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" args_size"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" aload_0\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" getfield      #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Field m:I")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" iconst_1\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" iadd\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ireturn\n      "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LineNumberTable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        line "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LocalVariableTable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Start")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Length")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Slot")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Name")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Signature")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Lcom")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rhythm7"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SourceFile")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Main.java"')]),s._v("\n\n")])])]),a("h3",{attrs:{id:"字节码文件信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字节码文件信息"}},[s._v("#")]),s._v(" 字节码文件信息")]),s._v(" "),a("p",[s._v("开头的7行信息包括:Class文件当前所在位置，最后修改时间，文件大小，MD5值，编译自哪个文件，类的全限定名，jdk次版本号，主版本号。")]),s._v(" "),a("p",[s._v("然后紧接着的是该类的访问标志：ACC_PUBLIC, ACC_SUPER，访问标志的含义如下:")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("标志名称")]),s._v(" "),a("th",[s._v("标志值")]),s._v(" "),a("th",[s._v("含义")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("ACC_PUBLIC")]),s._v(" "),a("td",[s._v("0x0001")]),s._v(" "),a("td",[s._v("是否为Public类型")])]),s._v(" "),a("tr",[a("td",[s._v("ACC_FINAL")]),s._v(" "),a("td",[s._v("0x0010")]),s._v(" "),a("td",[s._v("是否被声明为final，只有类可以设置")])]),s._v(" "),a("tr",[a("td",[s._v("ACC_SUPER")]),s._v(" "),a("td",[s._v("0x0020")]),s._v(" "),a("td",[s._v("是否允许使用invokespecial字节码指令的新语义．")])]),s._v(" "),a("tr",[a("td",[s._v("ACC_INTERFACE")]),s._v(" "),a("td",[s._v("0x0200")]),s._v(" "),a("td",[s._v("标志这是一个接口")])]),s._v(" "),a("tr",[a("td",[s._v("ACC_ABSTRACT")]),s._v(" "),a("td",[s._v("0x0400")]),s._v(" "),a("td",[s._v("是否为abstract类型，对于接口或者抽象类来说，次标志值为真，其他类型为假")])]),s._v(" "),a("tr",[a("td",[s._v("ACC_SYNTHETIC")]),s._v(" "),a("td",[s._v("0x1000")]),s._v(" "),a("td",[s._v("标志这个类并非由用户代码产生")])]),s._v(" "),a("tr",[a("td",[s._v("ACC_ANNOTATION")]),s._v(" "),a("td",[s._v("0x2000")]),s._v(" "),a("td",[s._v("标志这是一个注解")])]),s._v(" "),a("tr",[a("td",[s._v("ACC_ENUM")]),s._v(" "),a("td",[s._v("0x4000")]),s._v(" "),a("td",[s._v("标志这是一个枚举")])])])]),s._v(" "),a("h3",{attrs:{id:"常量池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常量池"}},[s._v("#")]),s._v(" 常量池")]),s._v(" "),a("p",[a("code",[s._v("Constant pool")]),s._v("意为常量池。")]),s._v(" "),a("p",[s._v("常量池可以理解成Class文件中的资源仓库。主要存放的是两大类常量：字面量(Literal)和符号引用(Symbolic References)。字面量类似于java中的常量概念，如文本字符串，final常量等，而符号引用则属于编译原理方面的概念，包括以下三种:")]),s._v(" "),a("ul",[a("li",[s._v("类和接口的全限定名(Fully Qualified Name)")]),s._v(" "),a("li",[s._v("字段的名称和描述符号(Descriptor)")]),s._v(" "),a("li",[s._v("方法的名称和描述符")])]),s._v(" "),a("p",[s._v("不同于C/C++, JVM是在加载Class文件的时候才进行的动态链接，也就是说这些字段和方法符号引用只有在运行期转换后才能获得真正的内存入口地址。当虚拟机运行时，需要从常量池获得对应的符号引用，再在类创建或运行时解析并翻译到具体的内存地址中。"),a("br"),s._v("\n直接通过反编译文件来查看字节码内容：")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Methodref")]),s._v("          #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.")]),s._v("#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// java/lang/Object."<init>":()V')]),s._v("\n#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Class")]),s._v("              #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// java/lang/Object")]),s._v("\n#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Utf8")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("init"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Utf8")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),s._v("\n#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("NameAndType")]),s._v("        #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// "<init>":()V')]),s._v("\n#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Utf8")]),s._v("               java"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v("  \n")])])]),a("p",[a("strong",[s._v("第一个常量")]),s._v("是一个方法定义，指向了第4和第18个常量。以此类推查看第4和第18个常量。最后可以拼接成第一个常量右侧的注释内容:")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("java"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<init>"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),s._v("  \n")])])]),a("p",[s._v("这段可以理解为该类的实例构造器的声明，由于Main类没有重写构造方法，所以调用的是父类的构造方法。此处也说明了Main类的直接父类是Object。"),a("br"),s._v("\n该方法默认返回值是V, 也就是void，无返回值。")]),s._v(" "),a("p",[a("strong",[s._v("第二个常量")]),s._v("同理可得:")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Fieldref")]),s._v("           #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.")]),s._v("#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// com/rhythm7/Main.m:I")]),s._v("\n#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Class")]),s._v("              #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// com/rhythm7/Main")]),s._v("\n#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Utf8")]),s._v("               m\n#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Utf8")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("I")]),s._v("\n#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("NameAndType")]),s._v("        #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// m:I")]),s._v("\n#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Utf8")]),s._v("               com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rhythm7"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Main")]),s._v("  \n")])])]),a("p",[s._v("复制代码此处声明了一个字段m，类型为I, I即是int类型。关于字节码的类型对应如下：")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("标识字符")]),s._v(" "),a("th",[s._v("含义")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("B")]),s._v(" "),a("td",[s._v("基本类型byte")])]),s._v(" "),a("tr",[a("td",[s._v("C")]),s._v(" "),a("td",[s._v("基本类型char")])]),s._v(" "),a("tr",[a("td",[s._v("D")]),s._v(" "),a("td",[s._v("基本类型double")])]),s._v(" "),a("tr",[a("td",[s._v("F")]),s._v(" "),a("td",[s._v("基本类型float")])]),s._v(" "),a("tr",[a("td",[s._v("I")]),s._v(" "),a("td",[s._v("基本类型int")])]),s._v(" "),a("tr",[a("td",[s._v("J")]),s._v(" "),a("td",[s._v("基本类型long")])]),s._v(" "),a("tr",[a("td",[s._v("S")]),s._v(" "),a("td",[s._v("基本类型short")])]),s._v(" "),a("tr",[a("td",[s._v("Z")]),s._v(" "),a("td",[s._v("基本类型boolean")])]),s._v(" "),a("tr",[a("td",[s._v("V")]),s._v(" "),a("td",[s._v("特殊类型void")])]),s._v(" "),a("tr",[a("td",[s._v("L")]),s._v(" "),a("td",[s._v("对象类型，以分号结尾，如Ljava/lang/Object;")])])])]),s._v(" "),a("p",[s._v("对于数组类型，每一位使用一个前置的"),a("code",[s._v("[")]),s._v("字符来描述，如定义一个"),a("code",[s._v("java.lang.String[][]")]),s._v("类型的维数组，将被记录为"),a("code",[s._v("[[Ljava/lang/String;")])]),s._v(" "),a("h3",{attrs:{id:"方法表集合"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法表集合"}},[s._v("#")]),s._v(" 方法表集合")]),s._v(" "),a("p",[s._v("在常量池之后的是对类内部的方法描述，在字节码中以表的集合形式表现，暂且不管字节码文件的16进制文件内容如何，我们直接看反编译后的内容。")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  descriptor"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("I")]),s._v("\n  flags"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ACC_PRIVATE")]),s._v("  \n")])])]),a("p",[s._v("此处声明了一个私有变量m，类型为int，返回值为int")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("rhythm7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("Main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   descriptor"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),s._v("\n   flags"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ACC_PUBLIC")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Code")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n     stack"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" locals"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" args_size"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" aload_0\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" invokespecial #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// Method java/lang/Object."<init>":()V')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LineNumberTable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n       line "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LocalVariableTable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Start")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Length")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Slot")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Name")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Signature")]),s._v("\n           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Lcom")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rhythm7"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  \n")])])]),a("p",[s._v("这里是构造方法：Main()，返回值为void, 公开方法。")]),s._v(" "),a("p",[s._v("code内的主要属性为:")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("stack")]),s._v(" : 最大操作数栈，JVM运行时会根据这个值来分配栈帧(Frame)中的操作栈深度,此处为1")]),s._v(" "),a("li",[a("strong",[s._v("locals")]),s._v(" : 局部变量所需的存储空间，单位为Slot, Slot是虚拟机为局部变量分配内存时所使用的最小单位，为4个字节大小。方法参数(包括实例方法中的隐藏参数this)，显示异常处理器的参数(try catch中的catch块所定义的异常)，方法体中定义的局部变量都需要使用局部变量表来存放。值得一提的是，locals的大小并不一定等于所有局部变量所占的Slot之和，因为局部变量中的Slot是可以重用的。")]),s._v(" "),a("li",[a("strong",[s._v("args_size")]),s._v(" : 方法参数的个数，这里是1，因为每个实例方法都会有一个隐藏参数this")]),s._v(" "),a("li",[a("strong",[s._v("attribute_info")]),s._v(' : 方法体内容，0,1,4为字节码"行号"，该段代码的意思是将第一个引用类型本地变量推送至栈顶，然后执行该类型的实例方法，也就是常量池存放的第一个变量，也就是注释里的'),a("code",[s._v('java/lang/Object."":()V')]),s._v(", 然后执行返回语句，结束方法。")]),s._v(" "),a("li",[a("strong",[s._v("LineNumberTable")]),s._v(" : 该属性的作用是描述源码行号与字节码行号(字节码偏移量)之间的对应关系。可以使用 -g:none 或-g:lines选项来取消或要求生成这项信息，如果选择不生成LineNumberTable，当程序运行异常时将无法获取到发生异常的源码行号，也无法按照源码的行数来调试程序。")]),s._v(" "),a("li",[a("strong",[s._v("LocalVariableTable")]),s._v(" : 该属性的作用是描述帧栈中局部变量与源码中定义的变量之间的关系。可以使用 -g:none 或 -g:vars来取消或生成这项信息，如果没有生成这项信息，那么当别人引用这个方法时，将无法获取到参数名称，取而代之的是arg0, arg1这样的占位符。"),a("br"),s._v("\nstart 表示该局部变量在哪一行开始可见，length表示可见行数，Slot代表所在帧栈位置，Name是变量名称，然后是类型签名。")])]),s._v(" "),a("p",[s._v('同理可以分析Main类中的另一个方法"inc()":')]),s._v(" "),a("p",[s._v("方法体内的内容是：将this入栈，获取字段#2并置于栈顶, 将int类型的1入栈，将栈内顶部的两个数值相加，返回一个int类型的值。")]),s._v(" "),a("h3",{attrs:{id:"类名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#类名"}},[s._v("#")]),s._v(" 类名")]),s._v(" "),a("p",[s._v("最后很显然是源码文件：")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SourceFile")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Main.java"')]),s._v("  \n")])])]),a("h2",{attrs:{id:"再看两个示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#再看两个示例"}},[s._v("#")]),s._v(" 再看两个示例")]),s._v(" "),a("h3",{attrs:{id:"分析try-catch-finally"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分析try-catch-finally"}},[s._v("#")]),s._v(" 分析try-catch-finally")]),s._v(" "),a("p",[s._v("通过以上一个最简单的例子，可以大致了解源码被编译成字节码后是什么样子的。 下面利用所学的知识点来分析一些Java问题:")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TestCode")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("finally")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("试问当不发生异常和发生异常的情况下，foo()的返回值分别是多少。")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("javac "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TestCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("java\njavap "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("verbose "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TestCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v("\n")])])]),a("p",[s._v("查看字节码的foo方法内容:")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    descriptor"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("I")]),s._v("\n    flags"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ACC_PUBLIC")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Code")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      stack"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" locals"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" args_size"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" iconst_1 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//int型1入栈 ->栈顶=1")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" istore_1 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//将栈顶的int型数值存入第二个局部变量 ->局部2=1")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" iload_1 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//将第二个int型局部变量推送至栈顶 ->栈顶=1")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" istore_2 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//!!将栈顶int型数值存入第三个局部变量 ->局部3=1")]),s._v("\n     \n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" iconst_3 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//int型3入栈 ->栈顶=3")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" istore_1 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//将栈顶的int型数值存入第二个局部变量 ->局部2=3")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" iload_2 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//!!将第三个int型局部变量推送至栈顶 ->栈顶=1")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ireturn "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//从当前方法返回栈顶int数值 ->1")]),s._v("\n     \n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" astore_2 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ->局部3=Exception")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" iconst_2 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ->栈顶=2")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" istore_1 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ->局部2=2")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" iload_1 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//->栈顶=2")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" istore_3 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//!! ->局部4=2")]),s._v("\n    \n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" iconst_3 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ->栈顶=3")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" istore_1 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ->局部1=3")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" iload_3 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//!! ->栈顶=2")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ireturn "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// -> 2")]),s._v("\n    \n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" astore        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//将栈顶引用型数值存入第五个局部变量=any")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" iconst_3 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//将int型数值3入栈 -> 栈顶3")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" istore_1 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//将栈顶第一个int数值存入第二个局部变量 -> 局部2=3")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" aload         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//将局部第五个局部变量(引用型)推送至栈顶")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" athrow "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//将栈顶的异常抛出")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" table"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n         from    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("target")]),s._v(" type\n             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Class")]),s._v(" java"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//0到4行对应的异常，对应#8中储存的异常")]),s._v("\n             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("   any "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//Exeption之外的其他异常")]),s._v("\n             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("   any\n            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("   any\n")])])]),a("p",[s._v("在字节码的4,5，以及13,14中执行的是同一个操作，就是将int型的3入操作数栈顶，并存入第二个局部变量。这正是我们源码在finally语句块中内容。也就是说，JVM在处理异常时，会在每个可能的分支都将finally语句重复执行一遍。")]),s._v(" "),a("p",[s._v("通过一步步分析字节码，可以得出最后的运行结果是：")]),s._v(" "),a("ul",[a("li",[s._v("不发生异常时: return 1")]),s._v(" "),a("li",[s._v("发生异常时: return 2")]),s._v(" "),a("li",[s._v("发生非Exception及其子类的异常，抛出异常，不返回值")])]),s._v(" "),a("blockquote",[a("p",[s._v("以上例子来自于《深入理解Java虚拟机 JVM高级特性与最佳实践》, 关于虚拟机字节码指令表，也可以在《深入理解Java虚拟机 JVM高级特性与最佳实践-附录B》中获取。")])]),s._v(" "),a("h3",{attrs:{id:"kotlin-函数扩展的实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kotlin-函数扩展的实现"}},[s._v("#")]),s._v(" kotlin 函数扩展的实现")]),s._v(" "),a("p",[s._v("kotlin提供了扩展函数的语言特性，借助这个特性，我们可以给任意对象添加自定义方法。")]),s._v(" "),a("p",[s._v('以下示例为Object添加"sayHello"方法')]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//SayHello.kt")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("rhythm7")]),s._v("\n\nfun "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Any")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sayHello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n")])])]),a("p",[s._v("编译后，使用javap查看生成SayHelloKt.class文件的字节码。")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Classfile")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("E")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JavaCode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TestProj")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("production"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TestProj")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rhythm7"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SayHelloKt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Last")]),s._v(" modified "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" size "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("958")]),s._v(" bytes\n "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MD5")]),s._v(" checksum "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("780")]),s._v("a04b75a91be7605cac4655b499f19\n "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Compiled")]),s._v(" from "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SayHello.kt"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("rhythm7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("SayHelloKt")]),s._v("\n minor version"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n major version"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v("\n flags"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ACC_PUBLIC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ACC_FINAL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ACC_SUPER")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Constant")]),s._v(" pool"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//省略常量池部分字节码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sayHello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   descriptor"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Ljava")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),s._v("\n   flags"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ACC_PUBLIC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ACC_STATIC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ACC_FINAL")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Code")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n     stack"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" locals"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" args_size"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" aload_0\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ldc           #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// String $receiver")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" invokestatic  #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Method kotlin/jvm/internal/Intrinsics.checkParameterIsNotNull:(Ljava/lang/Object;Ljava/lang/String;)V")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ldc           #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// String Hello")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" astore_1\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" getstatic     #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Field java/lang/System.out:Ljava/io/PrintStream;")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" aload_1\n       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" invokevirtual #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Method java/io/PrintStream.println:(Ljava/lang/Object;)V")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LocalVariableTable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Start")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Length")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Slot")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Name")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Signature")]),s._v("\n           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" $receiver   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Ljava")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LineNumberTable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n       line "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n       line "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RuntimeInvisibleParameterAnnotations")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" #"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SourceFile")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SayHello.kt"')]),s._v("  \n")])])]),a("p",[s._v('观察头部发现,koltin为文件SayHello生成了一个类，类名"com.rhythm7.SayHelloKt".')]),s._v(" "),a("p",[s._v("由于我们一开始编写SayHello.kt时并不希望SayHello是一个可实例化的对象类，所以，SayHelloKt是无法被实例化的，SayHelloKt并没有任何一个构造器。")]),s._v(" "),a("p",[s._v("再观察唯一的一个方法：发现Any.sayHello()的具体实现是静态不可变方法的形式:")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sayHello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n")])])]),a("p",[s._v("所以当我们在其他地方使用Any.sayHello()时，事实上等同于调用java的SayHelloKt.sayHello(Object)方法。")]),s._v(" "),a("p",[s._v("顺便一提的是，当扩展的方法为Any时，意味着Any是non-null的，这时，编译器会在方法体的开头检查参数的非空，即调用"),a("br"),s._v(" "),a("code",[s._v("kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull(Object value, String paramName)")]),a("br"),s._v("\n方法来检查传入的Any类型对象是否为空。如果我们扩展的函数为"),a("code",[s._v("Any?.sayHello()")]),s._v("，那么在编译后的文件中则不会有这段字节码的出现。")]),s._v(" "),a("p",[s._v("‍")]),s._v(" "),a("h3",{attrs:{id:"著作权归https-pdai-tech所有。链接-https-www-pdai-tech-md-java-jvm-java-jvm-class-html"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#著作权归https-pdai-tech所有。链接-https-www-pdai-tech-md-java-jvm-java-jvm-class-html"}},[s._v("#")]),s._v(" 著作权归https://pdai.tech所有。链接："),a("a",{attrs:{href:"https://www.pdai.tech/md/java/jvm/java-jvm-class.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.pdai.tech/md/java/jvm/java-jvm-class.html"),a("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=e.exports}}]);