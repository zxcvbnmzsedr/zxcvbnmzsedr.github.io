{
    "componentChunkName": "component---src-templates-article-page-template-tsx",
    "path": "/posts/定时备份数据",
    "result": {"pageContext":{"id":"/posts/定时备份数据","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"定时备份数据"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"为了防止硬盘的损坏，因此需要定时将数据同步到阿里云盘中。。。。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"通过 rclone 命令将定时任务挂载到阿里云盘中。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"在配置 rclone 的时候，如果是 webdav 一定要选择 webdav，而不能选择 http，如果选择了 http 协议在挂载和读取的过程中没有任何问题，但是在上传文件的时候会爆出权限异常，"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"http remotes are read only"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"rclone 同步的命令是:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"# transfers 指定同时上传数量\nrclone sync /home ali:/omv/back/home --transfers=8 -P\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"将 rclone 配置成服务:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"vim /etc/systemd/system/backup.service\n\n[Unit]\nDescription=backup\nAfter=network.target\n\n[Service]\nType=oneshot\nUser=root\nExecStart=/usr/bin/rclone sync /home ali:/omv/back/home --transfers=8 -P\nRestart=on-failure\n\n[Install]\nWantedBy=multi-user.target\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"将 rclone 配置成定时任务:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"vim /etc/systemd/system/backup.timer\n\n[Unit]\nDescription=backUp Timer\n\n[Timer]\nOnUnitActiveSec=1h\nUnit=backup.service\n\n[Install]\nWantedBy=multi-user.target\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"之后只需要开启定时任务即可:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"systemctl daemon-reload\nsystemctl enable backup.timer\nsystemctl start backup.timer\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"如果不放心，手动启动一遍看有没有错:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"systemctl start backup\n# 查看状态\nsystemctl status backup\n# 连续打印日志\njournalctl -u backup -n 20 -f\n"}]}]}],"data":{"quirksMode":false}},"headings":[{"depth":1,"value":"定时备份数据","slug":"定时备份数据"}]}},
    "staticQueryHashes": ["928362550"]}