(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{419:function(s,t,n){"use strict";n.r(t);var e=n(7),o=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"onlyoffice在线预览加载优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#onlyoffice在线预览加载优化"}},[s._v("#")]),s._v(" onlyoffice在线预览加载优化")]),s._v(" "),t("p",[s._v("onlyoffice在线预览时会加载相关连的样式和js等静态文件，部分文件体积较大（如sdk文件、fonts文件等）导致前端加载缓慢")]),s._v(" "),t("p",[s._v("将大体积文件备份到oss等服务，并修改nginx转发到指定服务")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("找到指定的静态文件：在docker版中onlyoffice的静态文件在/var/www/onlyoffice/documentserver目录下（版本不一致请对应查找文件即可）")])]),s._v(" "),t("li",[t("p",[s._v("将docker容器的目标文件复制到宿主机并上传到oss；docker复制命令：docker cp [容器]:/var/www/onlyoffice/documentserver/fonts /tmp/onlyoffice/fonts")])]),s._v(" "),t("li",[t("p",[s._v("找到nginx配置文件：在docker版中nginx文件在：/etc/nginx/includes目录下，这里主要修改ds-docservice.conf")])]),s._v(" "),t("li",[t("p",[s._v("添加目标文件的转发配置,示例：")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("  location "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.4")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("fonts"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("{\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" https:"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//xxxxxx.com/7.4.1-36/fonts$1?$args;")]),s._v("\n  }\n")])])])])]),s._v(" "),t("p",[s._v("‍")])])}),[],!1,null,null,null);t.default=o.exports}}]);