(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{385:function(t,e,r){"use strict";r.r(e);var a=r(7),s=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"emby直链阿里云盘播放"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#emby直链阿里云盘播放"}},[t._v("#")]),t._v(" Emby直链阿里云盘播放")]),t._v(" "),e("p",[t._v("之前用CloudFlare抢救了一下移动大内网的机器，解决了在外网查看的问题。")]),t._v(" "),e("p",[t._v("但是，由于国内宽带的上下行严重不对等，以致于无法在外头正常的播放家中的动辄十几个G的蓝光原盘，需要解决一下外网访问慢的问题。")]),t._v(" "),e("p",[t._v("目前我的做法是，通过emby视频源劫持到目录程序的对应文件的直链，从而实现不走家中NAS的流量，而体验和正常的emby别无二致。")]),t._v(" "),e("p",[t._v("这种方式唯一的弊端就是无法通过服务器端进行解码，当然1900的性能也支撑不了服务端解码。")]),t._v(" "),e("h1",{attrs:{id:"环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#环境"}},[t._v("#")]),t._v(" 环境")]),t._v(" "),e("ol",[e("li",[t._v("用Alist连接阿里云盘，转成webdav协议")]),t._v(" "),e("li",[t._v("使用Rclone 将webdav挂载到本地磁盘中")]),t._v(" "),e("li",[t._v("会一丢丢docker")])]),t._v(" "),e("p",[t._v("alist 连接阿里云盘比较简单，直接参考官网的教程即可，"),e("a",{attrs:{href:"https://alist.nn.ci/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://alist.nn.ci/"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("rclone 挂载，可以看之前我折腾的"),e("a",{attrs:{href:"/posts/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1NAS%E7%B3%BB%E7%BB%9F%E5%B4%A9%E6%BA%83"}},[t._v("《记录一次NAS系统崩溃》")])]),t._v(" "),e("h1",{attrs:{id:"实现"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实现"}},[t._v("#")]),t._v(" 实现")]),t._v(" "),e("p",[t._v("用nginx 反向代理emby，将访问本地磁盘的路径，借助alist提供的API，使用302跳转的方式，转换成阿里云盘的直链。")]),t._v(" "),e("p",[t._v("具体的代码在: "),e("a",{attrs:{href:"https://github.com/zxcvbnmzsedr/docker_env/blob/master/emby/README.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/zxcvbnmzsedr/docker_env/blob/master/emby/README.md"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("需要修改一下 nginx/conf.d/emby.js,将密码啥的给替换成自己的，然后用docker-compose up -d 启动即可。")]),t._v(" "),e("p",[t._v("‍")]),t._v(" "),e("p",[t._v("在emby访问具体视频资源的时候，会通过Nginx走一道，在Nginx中判断如果是视频资源则调用alist的API找到真实的直连地址，并返回。这样客户端就能拿到真实的视频地址进行播放了。")])])}),[],!1,null,null,null);e.default=s.exports}}]);