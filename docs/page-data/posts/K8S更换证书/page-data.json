{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/K8S更换证书","result":{"data":{"siYuan":{"excerpt":"K8S更换证书 kubeadm默认安装的证书有效期只有一年，过期只有整个集群都没有办法正常运行。一直在报错: > Get \"https://[10.96.0.1]:443/apis/crd.projectcalico.org/v1/clus...","raw":"# K8S更换证书\n\nkubeadm默认安装的证书有效期只有一年，过期只有整个集群都没有办法正常运行。一直在报错:\n\n> Get \"https://[10.96.0.1]:443/apis/crd.projectcalico.org/v1/clusterinformations/default\": x509: certificate has expired or is not yet valid: current time 2022-06-05T22:31:49-04:00 is after 2022-06-02T11:30:48Z]\n>\n\n需要对证书进行更换\n\n# 检查过期时间\n\n```shell\nkubeadm certs check-expiration\n```\n\n![](https://image.ztianzeng.com/uPic/20220606104802.png)\n\n# 证书备份\n\n备份是一个好习惯\n\n```shell\ncp -rp /etc/kubernetes /etc/kubernetes.bak\n```\n\n# 重新生成证书\n\n```shell\nkubeadm certs renew all\n```\n\n![](https://image.ztianzeng.com/uPic/20220606104753.png)\n\n# 重启kubelet\n\n```shell\nsystemctl restart kubelet\n```\n\n# 验证更换是否成功\n\n```shell\nkubeadm certs check-expiration\n```\n\n![](https://image.ztianzeng.com/uPic/20220606104802.png)\n","field":{"slug":"/posts/K8S更换证书"},"frontmatter":{"title":"K8S更换证书","tags":[],"date":"2022-06-06","description":"K8S更换证书 kubeadm默认安装的证书有效期只有一年，过期只有整个集群都没有办法正常运行。一直在报错: > Get \"https://[10.96.0.1]:443/apis/crd.projectcalico.org/v1/clus..."}},"prev":{"frontmatter":{"title":"准备迎接SpringBoot3.0"},"field":{"slug":"/posts/准备迎接SpringBoot3.0"}},"next":{"frontmatter":{"title":"并发请求去重"},"field":{"slug":"/posts/并发请求去重"}}},"pageContext":{"slug":"/posts/K8S更换证书","prevSlug":"/posts/准备迎接SpringBoot3.0","nextSlug":"/posts/并发请求去重"}},"staticQueryHashes":["1284643331","2841359383"]}