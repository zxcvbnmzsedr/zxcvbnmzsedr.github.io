{
    "componentChunkName": "component---src-templates-article-page-template-tsx",
    "path": "/posts/K8S从入门到放弃 —— 安装Ingress",
    "result": {"pageContext":{"id":"/posts/K8S从入门到放弃 —— 安装Ingress","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"K8S从入门到放弃 —— 安装Ingress"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Ingress 是提供了一个路由，用于反向代理到集群内部的服务中。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"这是官网的一张请求示例图。能清晰的看到Ingress所提供的功能。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"Ingress Controller"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Ingress 提供了好多种实现方式，比如 traefic / Kong / Istio / Nginx 等"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"最恶心的是，Nginx 还提供了两个版本 :"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"一个是Nginx公司实现的 "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/nginxinc/kubernetes-ingress"},"children":[{"type":"text","value":"nginx-ingress"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"还有一个是K8S 社区实现的 "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/kubernetes/ingress-nginx/"},"children":[{"type":"text","value":"ingress-nginx"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"table","properties":{},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"thead","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"特性"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"K8S 实现版本"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"Nginx 实现版本 (NGINX)"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"Nginx 实现版本 (NGINX Plus)"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{"align":"center","colSpan":"4"},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"基础"}]}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"作者"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"K8S 社区"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Nginx 公司和社区"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Nginx 公司和社区"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Nginx版本"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"包含一些三方模块的定制的 Nginx 版本"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Nginx 官方版本"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Nginx Plus"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"商业支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"N/A"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"N/A"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"包含"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{"align":"center","colSpan":"4","<strong":""},"children":[{"type":"text","value":"通过Ingress资源配置负载均衡"}]},{"type":"text","value":"\n        "}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"合并同一host的Ingress规则"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://github.com/nginxinc/kubernetes-ingress/blob/master/examples/mergeable-ingress-types"},"children":[{"type":"text","value":"Mergeable Ingresses"}]},{"type":"text","value":" 支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://github.com/nginxinc/kubernetes-ingress/blob/master/examples/mergeable-ingress-types"},"children":[{"type":"text","value":"Mergeable Ingresses"}]},{"type":"text","value":" 支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"HTTP负载均衡扩展 -- 注解方式"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/annotations/"},"children":[{"type":"text","value":"K8S 支持的注解"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://docs.nginx.com/nginx-ingress-controller/configuration/ingress-resources/advanced-configuration-with-annotations/"},"children":[{"type":"text","value":"Nginx 支持的注解"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://docs.nginx.com/nginx-ingress-controller/configuration/ingress-resources/advanced-configuration-with-annotations/"},"children":[{"type":"text","value":"Nginx 支持的注解"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"HTTP负载均衡扩展 -- ConfigMap 方式"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/configmap/"},"children":[{"type":"text","value":"K8S 支持的 ConfigMap 主键"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://docs.nginx.com/nginx-ingress-controller/configuration/global-configuration/configmap-resource/"},"children":[{"type":"text","value":"Nginx 支持的 ConfigMap 主键"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://docs.nginx.com/nginx-ingress-controller/configuration/global-configuration/configmap-resource/"},"children":[{"type":"text","value":"Nginx 支持的 ConfigMap 主键"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"TCP/UDP"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过 ConfigMap 支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过 ConfigMap (原生 NGINX 配置) 支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过 ConfigMap (原生 NGINX 配置) 支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Websocket"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过注解支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过注解支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"TCP SSL Passthrough"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过 ConfigMap 支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"不支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"不支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"JWT 验证"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"不支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"不支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Session 持久化"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过三方库支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"不支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"金丝雀测试 (通过 header, cookie, weight)"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过注解支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过定制的资源支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过定制的资源支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"配置模板 *1"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://github.com/kubernetes/ingress-nginx/blob/master/rootfs/etc/nginx/template/nginx.tmpl"},"children":[{"type":"text","value":"模板"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://github.com/nginxinc/kubernetes-ingress/blob/master/internal/configs/version1"},"children":[{"type":"text","value":"模板"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://github.com/nginxinc/kubernetes-ingress/blob/master/internal/configs/version1"},"children":[{"type":"text","value":"模板"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{"align":"center","colSpan":"4"},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"通过定制化资源配置负载均衡配置"}]}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"HTTP负载均衡"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"不支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://docs.nginx.com/nginx-ingress-controller/configuration/virtualserver-and-virtualserverroute-resources/"},"children":[{"type":"text","value":"VirtualServer 和 VirtualServerRoute"}]},{"type":"text","value":" 资源"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://docs.nginx.com/nginx-ingress-controller/configuration/virtualserver-and-virtualserverroute-resources/"},"children":[{"type":"text","value":"VirtualServer 和 VirtualServerRoute"}]},{"type":"text","value":" 资源"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{"colSpan":"4"},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"部署"}]}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"命令行参数 *2"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://kubernetes.github.io/ingress-nginx/user-guide/cli-arguments/"},"children":[{"type":"text","value":"K8S 版 参数列表"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://docs.nginx.com/nginx-ingress-controller/configuration/global-configuration/command-line-arguments/"},"children":[{"type":"text","value":"Nginx 版 参数列表"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"同左"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"默认 Server 的 TLS 证书和秘钥"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"必需(命令行参数) / 自动生成"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"必需(命令行参数)"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"必需(命令行参数)"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Helm Chart"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{"align":"center","colSpan":"4"},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"运维"}]}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"上报 Ingress 控制器的 IP地址到Ingress资源"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"扩展的状态"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过三方模块支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"不支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Prometheus 整合"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"动态配置 endpoints (无需重新加载配置)"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过三方模块支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"不支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"我自己一开始使用的是Nginx出品的那个，后面发现Stack Overflow上讨论的问题都没有K8S出品的多，就使用上了K8S的版本Ingress。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"安装"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","dark-default-dark"],"dataLanguage":"","dataIndex":"0"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"# 正常情况下就能装上，但是国内由于某些特殊原因导致访问不了谷歌服务，所以需要手动修改镜像地址"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"curl  https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v0.46.0/deploy/static/provider/cloud/deploy.yaml -O"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"kubectl apply -f deploy.yaml"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"style","properties":{"className":["grvsc-styles"]},"children":[{"type":"text","value":"\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .dark-default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .dark-default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n"}]}],"data":{"quirksMode":false}},"articleNode":{"field":{"contentType":"posts","topic":null},"frontmatter":{"id":"/posts/K8S从入门到放弃 —— 安装Ingress","title":"K8S从入门到放弃 —— 安装Ingress","date":"2022-04-21 15:48","absolute_path":"/posts/K8S从入门到放弃 —— 安装Ingress"},"htmlAst":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"K8S从入门到放弃 —— 安装Ingress"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Ingress 是提供了一个路由，用于反向代理到集群内部的服务中。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"这是官网的一张请求示例图。能清晰的看到Ingress所提供的功能。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"Ingress Controller"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Ingress 提供了好多种实现方式，比如 traefic / Kong / Istio / Nginx 等"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"最恶心的是，Nginx 还提供了两个版本 :"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"一个是Nginx公司实现的 "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/nginxinc/kubernetes-ingress"},"children":[{"type":"text","value":"nginx-ingress"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"还有一个是K8S 社区实现的 "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/kubernetes/ingress-nginx/"},"children":[{"type":"text","value":"ingress-nginx"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"table","properties":{},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"thead","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"特性"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"K8S 实现版本"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"Nginx 实现版本 (NGINX)"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"Nginx 实现版本 (NGINX Plus)"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{"align":"center","colSpan":"4"},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"基础"}]}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"作者"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"K8S 社区"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Nginx 公司和社区"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Nginx 公司和社区"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Nginx版本"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"包含一些三方模块的定制的 Nginx 版本"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Nginx 官方版本"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Nginx Plus"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"商业支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"N/A"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"N/A"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"包含"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{"align":"center","colSpan":"4","<strong":""},"children":[{"type":"text","value":"通过Ingress资源配置负载均衡"}]},{"type":"text","value":"\n        "}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"合并同一host的Ingress规则"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://github.com/nginxinc/kubernetes-ingress/blob/master/examples/mergeable-ingress-types"},"children":[{"type":"text","value":"Mergeable Ingresses"}]},{"type":"text","value":" 支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://github.com/nginxinc/kubernetes-ingress/blob/master/examples/mergeable-ingress-types"},"children":[{"type":"text","value":"Mergeable Ingresses"}]},{"type":"text","value":" 支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"HTTP负载均衡扩展 -- 注解方式"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/annotations/"},"children":[{"type":"text","value":"K8S 支持的注解"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://docs.nginx.com/nginx-ingress-controller/configuration/ingress-resources/advanced-configuration-with-annotations/"},"children":[{"type":"text","value":"Nginx 支持的注解"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://docs.nginx.com/nginx-ingress-controller/configuration/ingress-resources/advanced-configuration-with-annotations/"},"children":[{"type":"text","value":"Nginx 支持的注解"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"HTTP负载均衡扩展 -- ConfigMap 方式"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/configmap/"},"children":[{"type":"text","value":"K8S 支持的 ConfigMap 主键"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://docs.nginx.com/nginx-ingress-controller/configuration/global-configuration/configmap-resource/"},"children":[{"type":"text","value":"Nginx 支持的 ConfigMap 主键"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://docs.nginx.com/nginx-ingress-controller/configuration/global-configuration/configmap-resource/"},"children":[{"type":"text","value":"Nginx 支持的 ConfigMap 主键"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"TCP/UDP"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过 ConfigMap 支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过 ConfigMap (原生 NGINX 配置) 支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过 ConfigMap (原生 NGINX 配置) 支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Websocket"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过注解支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过注解支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"TCP SSL Passthrough"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过 ConfigMap 支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"不支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"不支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"JWT 验证"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"不支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"不支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Session 持久化"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过三方库支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"不支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"金丝雀测试 (通过 header, cookie, weight)"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过注解支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过定制的资源支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过定制的资源支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"配置模板 *1"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://github.com/kubernetes/ingress-nginx/blob/master/rootfs/etc/nginx/template/nginx.tmpl"},"children":[{"type":"text","value":"模板"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://github.com/nginxinc/kubernetes-ingress/blob/master/internal/configs/version1"},"children":[{"type":"text","value":"模板"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://github.com/nginxinc/kubernetes-ingress/blob/master/internal/configs/version1"},"children":[{"type":"text","value":"模板"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{"align":"center","colSpan":"4"},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"通过定制化资源配置负载均衡配置"}]}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"HTTP负载均衡"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"不支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://docs.nginx.com/nginx-ingress-controller/configuration/virtualserver-and-virtualserverroute-resources/"},"children":[{"type":"text","value":"VirtualServer 和 VirtualServerRoute"}]},{"type":"text","value":" 资源"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://docs.nginx.com/nginx-ingress-controller/configuration/virtualserver-and-virtualserverroute-resources/"},"children":[{"type":"text","value":"VirtualServer 和 VirtualServerRoute"}]},{"type":"text","value":" 资源"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{"colSpan":"4"},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"部署"}]}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"命令行参数 *2"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://kubernetes.github.io/ingress-nginx/user-guide/cli-arguments/"},"children":[{"type":"text","value":"K8S 版 参数列表"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"见 "},{"type":"element","tagName":"a","properties":{"target":"_blank","href":"https://docs.nginx.com/nginx-ingress-controller/configuration/global-configuration/command-line-arguments/"},"children":[{"type":"text","value":"Nginx 版 参数列表"}]},{"type":"text","value":"\n            "}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"同左"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"默认 Server 的 TLS 证书和秘钥"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"必需(命令行参数) / 自动生成"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"必需(命令行参数)"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"必需(命令行参数)"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Helm Chart"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{"align":"center","colSpan":"4"},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"运维"}]}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"上报 Ingress 控制器的 IP地址到Ingress资源"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"扩展的状态"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过三方模块支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"不支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Prometheus 整合"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"动态配置 endpoints (无需重新加载配置)"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"通过三方模块支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"不支持"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"支持"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"我自己一开始使用的是Nginx出品的那个，后面发现Stack Overflow上讨论的问题都没有K8S出品的多，就使用上了K8S的版本Ingress。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"安装"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","dark-default-dark"],"dataLanguage":"","dataIndex":"0"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"# 正常情况下就能装上，但是国内由于某些特殊原因导致访问不了谷歌服务，所以需要手动修改镜像地址"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"curl  https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v0.46.0/deploy/static/provider/cloud/deploy.yaml -O"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"kubectl apply -f deploy.yaml"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"style","properties":{"className":["grvsc-styles"]},"children":[{"type":"text","value":"\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .dark-default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .dark-default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n"}]}],"data":{"quirksMode":false}},"headings":[{"depth":1,"value":"K8S从入门到放弃 —— 安装Ingress"},{"depth":1,"value":"Ingress Controller"},{"depth":1,"value":"安装"}],"path":"/posts/K8S从入门到放弃 —— 安装Ingress"},"headings":[{"depth":1,"value":"K8S从入门到放弃 —— 安装Ingress","slug":"k8s从入门到放弃--安装ingress"},{"depth":1,"value":"Ingress Controller","slug":"ingress-controller"},{"depth":1,"value":"安装","slug":"安装"}]}},
    "staticQueryHashes": ["630634786","928362550"]}