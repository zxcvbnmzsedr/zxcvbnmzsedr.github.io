{
    "componentChunkName": "component---src-templates-topic-page-template-tsx",
    "path": "/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/TCC模式",
    "result": {"pageContext":{"id":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/TCC模式","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"TCC模式"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"TCC 与 Seata AT 事务⼀样都是两阶段事务，它与 AT 事务的主要区别为："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"TCC 对业务代码侵⼊严重"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"每个阶段的数据操作都要⾃⼰进⾏编码来实现，事务框架⽆法⾃动处理。"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"TCC 性能更⾼"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"不必对数据加全局锁，允许多个事务同时操作数据。"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://image.ztianzeng.com/uPic/ecaeda572495e4ea5e308fb938a38fd5.png","alt":"ecaeda572495e4ea5e308fb938a38fd5"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Seata TCC整体是"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"两阶段提交"}]},{"type":"text","value":"的模型。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"⼀个分布式的全局事务，全局事务是由若⼲分⽀事务组成的，分⽀事务要满⾜"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"两阶段提交"}]},{"type":"text","value":"的模型要求，即需要每个分⽀事务都具备⾃⼰的："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"⼀阶段 prepare ⾏为"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"⼆阶段 commit 或 rollback ⾏为"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://image.ztianzeng.com/uPic/20220427100423.png","alt":""},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"TCC 模式，不依赖于底层数据资源的事务⽀持："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"⼀阶段 prepare ⾏为：调⽤ ⾃定义 的 prepare 逻辑。"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"⼆阶段 commit ⾏为：调⽤ ⾃定义 的 commit 逻辑。"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"⼆阶段 rollback ⾏为：调⽤ ⾃定义 的 rollback 逻辑。"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"TCC 模式，是指⽀持把"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"⾃定义"}]},{"type":"text","value":"的分⽀事务纳⼊到全局事务的管理中。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"第⼀阶段 Try"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"以账户服务为例，当下订单时要扣减⽤户账户⾦额："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"假如⽤户购买 100 元商品，要扣减 100 元。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://image.ztianzeng.com/uPic/20220427100935.png","alt":""},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"TCC 事务⾸先对这100元的扣减⾦额进⾏预留，或者说是先冻结这100元"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://image.ztianzeng.com/uPic/20220427101002.png","alt":""},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"第⼆阶段 Confirm"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"如果第⼀阶段能够顺利完成，那么说明“扣减⾦额”业务(分⽀事务)最终肯定 是可以成功的。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"当全局事务提交时， TC会控制当前分⽀事务进⾏提交，如 果提交失败，TC 会反复尝试，直到提交成功为⽌。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"当全局事务提交时，就可以使⽤冻结的⾦额来最终实现业务数据操作："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://image.ztianzeng.com/uPic/20220427101024.png","alt":""},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"第⼆阶段 Cancel"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"如果全局事务回滚，就把冻结的⾦额进⾏解冻，恢复到以前的状态，TC 会 控制当前分⽀事务回滚，如果回滚失败，TC 会反复尝试，直到回滚完成为⽌。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"assets/image-20220427101106-zhsw0mu.png","alt":"image.png"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"多个事务并发的情况"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"多个TCC全局事务允许并发，它们执⾏扣减⾦额时，只需要冻结各⾃的⾦额即可："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://image.ztianzeng.com/uPic/20220427101229.png","alt":""},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"SpringCloud集成TCC"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"定义TCC接口"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"由于我们使用的是 SpringCloud + Feign，Feign的调用基于http，因此此处我们使用"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@LocalTCC"}]},{"type":"text","value":"便可。值得注意的是，"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@LocalTCC"}]},{"type":"text","value":"一定需要注解在接口上，此接口可以是寻常的业务接口，只要实现了TCC的两阶段提交对应方法便可，TCC相关注解如下："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@LocalTCC"}]},{"type":"text","value":" 适用于SpringCloud+Feign模式下的TCC"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@TwoPhaseBusinessAction"}]},{"type":"text","value":" 注解try方法，其中name为当前tcc方法的bean名称，写方法名便可（全局唯一），commitMethod指向提交方法，rollbackMethod指向事务回滚方法。指定好三个方法之后，seata会根据全局事务的成功或失败，去帮我们自动调用提交方法或者回滚方法。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@BusinessActionContextParameter"}]},{"type":"text","value":" 注解可以将参数传递到二阶段（commitMethod/rollbackMethod）的方法。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"BusinessActionContext"}]},{"type":"text","value":" 便是指TCC事务上下文"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","dark-default-dark"],"dataLanguage":"java","dataIndex":"0"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"/**"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" * 这里定义tcc的接口"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" * 一定要定义在接口上"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" * 我们使用springCloud的远程调用"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" * 那么这里使用LocalTCC便可"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" *"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@author"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" tanzj"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" */"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"@"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"LocalTCC"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"public"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"interface"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"TccService"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" {"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"    /**"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * 定义两阶段提交"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * name = 该tcc的bean名称,全局唯一"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * commitMethod = commit 为二阶段确认方法"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * rollbackMethod = rollback 为二阶段取消方法"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * BusinessActionContextParameter注解 传递参数到二阶段中"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     *"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@param"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"params"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"  -入参"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" String"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     */"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    @"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"TwoPhaseBusinessAction"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"(name = "}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"insert\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":", commitMethod = "}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"commitTcc\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":", rollbackMethod = "}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"cancel\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"String"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"insert"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"            @"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"BusinessActionContextParameter"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"(paramName = "}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"params\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":") "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"Map"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"String"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":", "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"String"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"> "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"params"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    );"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"    /**"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * 确认方法、可以另命名，但要保证与commitMethod一致"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * context可以传递try方法的参数"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     *"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@param"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" 上下文"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" boolean"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     */"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"boolean"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"commitTcc"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"BusinessActionContext"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":");"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"    /**"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * 二阶段取消方法"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     *"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@param"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" 上下文"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" boolean"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     */"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"boolean"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"cancel"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"BusinessActionContext"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":");"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"TCC接口的业务实现"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"为了保证代码的简洁，此处将路由层与业务层结合讲解，实际项目则不然。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"在try方法中使用"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@Transational"}]},{"type":"text","value":"可以直接通过spring事务回滚关系型数据库中的操作，而非关系型数据库等中间件的回滚操作可以交给rollbackMethod方法处理。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"使用context.getActionContext(\"params\")便可以得到一阶段try中定义的参数，在二阶段对此参数进行业务回滚操作。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"**注意1：**此处亦不可以捕获异常（同理切面处理异常），否则TCC将识别该操作为成功，二阶段直接执行commitMethod。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"注意2："},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"TCC模式要"}]},{"type":"text","value":"开发者自行"}]},{"type":"text","value":"保证幂等和事务防悬挂"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","dark-default-dark"],"dataLanguage":"java","dataIndex":"1"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"@"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"Slf4j"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"@"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"RestController"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"public"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"class"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"TccServiceImpl"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"implements"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"TccService"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" {"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    @"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"Autowired"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"TccDAO"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"tccDAO"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"    /**"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * tcc服务t（try）方法"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * 根据实际业务场景选择实际业务执行逻辑或者资源预留逻辑"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     *"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@param"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"params"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" - name"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" String"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     */"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    @"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"Override"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    @"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"PostMapping"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"/tcc-insert\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    @"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"Transactional"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"(rollbackFor = "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"Exception"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"class"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":", propagation = "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"Propagation"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"REQUIRED"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"public"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"String"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"insert"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"(@"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"RequestBody"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"Map"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"String"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":", "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"String"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"> "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"params"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":") {"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"info"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"xid = \""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" + "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"RootContext"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"getXID"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"());"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"//todo 实际的操作，或操作MQ、redis等"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"tccDAO"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"insert"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"(params);"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"//放开以下注解抛出异常"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"//throw new RuntimeException(\"服务tcc测试回滚\");"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk15"]},"children":[{"type":"text","value":"return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"success\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    }"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"    /**"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * tcc服务 confirm方法"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * 若一阶段采用资源预留，在二阶段确认时要提交预留的资源"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     *"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@param"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" 上下文"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" boolean"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     */"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    @"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"Override"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"public"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"boolean"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"commitTcc"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"BusinessActionContext"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":") {"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"info"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"xid = \""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" + "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"getXid"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"() + "}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"提交成功\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":");"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"//todo 若一阶段资源预留，这里则要提交资源"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk15"]},"children":[{"type":"text","value":"return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"true"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    }"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"    /**"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * tcc 服务 cancel方法"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     *"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@param"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" 上下文"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" boolean"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     */"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    @"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"Override"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"public"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"boolean"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"cancel"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"BusinessActionContext"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":") {"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"//todo 这里写中间件、非关系型数据库的回滚操作"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"System"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"out"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"println"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"please manually rollback this data:\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" + "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"getActionContext"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"params\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"));"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk15"]},"children":[{"type":"text","value":"return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"true"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    }"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"style","properties":{"className":["grvsc-styles"]},"children":[{"type":"text","value":"\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .dark-default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .dark-default-dark .mtk3 { color: #6A9955; }\n  .dark-default-dark .mtk4 { color: #569CD6; }\n  .dark-default-dark .mtk1 { color: #D4D4D4; }\n  .dark-default-dark .mtk10 { color: #4EC9B0; }\n  .dark-default-dark .mtk12 { color: #9CDCFE; }\n  .dark-default-dark .mtk8 { color: #CE9178; }\n  .dark-default-dark .mtk11 { color: #DCDCAA; }\n  .dark-default-dark .mtk15 { color: #C586C0; }\n  .dark-default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n"}]}],"data":{"quirksMode":false}},"html":"<h1 id=\"TCC模式\">TCC模式</h1>\n<p updated=\"20220721104027\">TCC 与 Seata AT 事务⼀样都是两阶段事务，它与 AT 事务的主要区别为：</p>\n<ul updated=\"20220721104027\">\n<li id=\"20220721104027-eexpclh\" updated=\"20220721104027\">\n<p updated=\"20220721104027\">TCC 对业务代码侵⼊严重</p>\n<p updated=\"20220721104027\">每个阶段的数据操作都要⾃⼰进⾏编码来实现，事务框架⽆法⾃动处理。</p>\n</li>\n<li id=\"20220721104027-r993egn\" updated=\"20220721104027\">\n<p updated=\"20220721104027\">TCC 性能更⾼</p>\n<p updated=\"20220721104027\">不必对数据加全局锁，允许多个事务同时操作数据。</p>\n</li>\n</ul>\n<p updated=\"20220721104027\"><span class=\"img\"><img src=\"https://image.ztianzeng.com/uPic/ecaeda572495e4ea5e308fb938a38fd5.png\" alt=\"ecaeda572495e4ea5e308fb938a38fd5\" /></span></p>\n<p updated=\"20220721104027\">Seata TCC整体是<code>两阶段提交</code>的模型。</p>\n<p updated=\"20220721104027\">⼀个分布式的全局事务，全局事务是由若⼲分⽀事务组成的，分⽀事务要满⾜<code>两阶段提交</code>的模型要求，即需要每个分⽀事务都具备⾃⼰的：</p>\n<ul updated=\"20220721104027\">\n<li id=\"20220721104027-ltn9fnt\" updated=\"20220721104027\">\n<p updated=\"20220721104027\">⼀阶段 prepare ⾏为</p>\n</li>\n<li id=\"20220721104027-gyoxzc6\" updated=\"20220721104027\">\n<p updated=\"20220721104027\">⼆阶段 commit 或 rollback ⾏为</p>\n</li>\n</ul>\n<p updated=\"20220721104027\"><span class=\"img\"><img src=\"https://image.ztianzeng.com/uPic/20220427100423.png\" alt=\"\" /></span></p>\n<p updated=\"20220721104027\">TCC 模式，不依赖于底层数据资源的事务⽀持：</p>\n<ul updated=\"20220721104027\">\n<li id=\"20220721104027-m4la35d\" updated=\"20220721104027\">\n<p updated=\"20220721104027\">⼀阶段 prepare ⾏为：调⽤ ⾃定义 的 prepare 逻辑。</p>\n</li>\n<li id=\"20220721104027-b9nlm0l\" updated=\"20220721104027\">\n<p updated=\"20220721104027\">⼆阶段 commit ⾏为：调⽤ ⾃定义 的 commit 逻辑。</p>\n</li>\n<li id=\"20220721104027-7viaz0y\" updated=\"20220721104027\">\n<p updated=\"20220721104027\">⼆阶段 rollback ⾏为：调⽤ ⾃定义 的 rollback 逻辑。</p>\n</li>\n</ul>\n<p updated=\"20220721104027\">TCC 模式，是指⽀持把<code>⾃定义</code>的分⽀事务纳⼊到全局事务的管理中。</p>\n<h1 id=\"第-阶段-Try\">第⼀阶段 Try</h1>\n<p updated=\"20220721104027\">以账户服务为例，当下订单时要扣减⽤户账户⾦额：</p>\n<p updated=\"20220721104027\">假如⽤户购买 100 元商品，要扣减 100 元。</p>\n<p updated=\"20220721104027\"><span class=\"img\"><img src=\"https://image.ztianzeng.com/uPic/20220427100935.png\" alt=\"\" /></span></p>\n<p updated=\"20220721104027\">TCC 事务⾸先对这100元的扣减⾦额进⾏预留，或者说是先冻结这100元</p>\n<p updated=\"20220721104027\"><span class=\"img\"><img src=\"https://image.ztianzeng.com/uPic/20220427101002.png\" alt=\"\" /></span></p>\n<h1 id=\"第-阶段-Confirm\">第⼆阶段 Confirm</h1>\n<p updated=\"20220721104027\">如果第⼀阶段能够顺利完成，那么说明“扣减⾦额”业务(分⽀事务)最终肯定 是可以成功的。</p>\n<p updated=\"20220721104027\">当全局事务提交时， TC会控制当前分⽀事务进⾏提交，如 果提交失败，TC 会反复尝试，直到提交成功为⽌。</p>\n<p updated=\"20220721104027\">当全局事务提交时，就可以使⽤冻结的⾦额来最终实现业务数据操作：</p>\n<p updated=\"20220721104027\"><span class=\"img\"><img src=\"https://image.ztianzeng.com/uPic/20220427101024.png\" alt=\"\" /></span></p>\n<h1 id=\"第-阶段-Cancel\">第⼆阶段 Cancel</h1>\n<p updated=\"20220721104027\">如果全局事务回滚，就把冻结的⾦额进⾏解冻，恢复到以前的状态，TC 会 控制当前分⽀事务回滚，如果回滚失败，TC 会反复尝试，直到回滚完成为⽌。</p>\n<p updated=\"20220721104027\"><span class=\"img\"><img src=\"assets/image-20220427101106-zhsw0mu.png\" alt=\"image.png\" /></span></p>\n<h1 id=\"多个事务并发的情况\">多个事务并发的情况</h1>\n<p updated=\"20220721104027\">多个TCC全局事务允许并发，它们执⾏扣减⾦额时，只需要冻结各⾃的⾦额即可：</p>\n<p updated=\"20220721104027\"><span class=\"img\"><img src=\"https://image.ztianzeng.com/uPic/20220427101229.png\" alt=\"\" /></span></p>\n<h1 id=\"SpringCloud集成TCC\">SpringCloud集成TCC</h1>\n<h3 id=\"定义TCC接口\">定义TCC接口</h3>\n<p updated=\"20220721104027\">由于我们使用的是 SpringCloud + Feign，Feign的调用基于http，因此此处我们使用<code>@LocalTCC</code>便可。值得注意的是，<code>@LocalTCC</code>一定需要注解在接口上，此接口可以是寻常的业务接口，只要实现了TCC的两阶段提交对应方法便可，TCC相关注解如下：</p>\n<ul updated=\"20220721104027\">\n<li id=\"20220721104027-q708kob\" updated=\"20220721104027\">\n<p updated=\"20220721104027\"><code>@LocalTCC</code> 适用于SpringCloud+Feign模式下的TCC</p>\n</li>\n<li id=\"20220721104027-tib127x\" updated=\"20220721104027\">\n<p updated=\"20220721104027\"><code>@TwoPhaseBusinessAction</code> 注解try方法，其中name为当前tcc方法的bean名称，写方法名便可（全局唯一），commitMethod指向提交方法，rollbackMethod指向事务回滚方法。指定好三个方法之后，seata会根据全局事务的成功或失败，去帮我们自动调用提交方法或者回滚方法。</p>\n</li>\n<li id=\"20220721104027-jx3btsm\" updated=\"20220721104027\">\n<p updated=\"20220721104027\"><code>@BusinessActionContextParameter</code> 注解可以将参数传递到二阶段（commitMethod/rollbackMethod）的方法。</p>\n</li>\n<li id=\"20220721104027-6hypcrl\" updated=\"20220721104027\">\n<p updated=\"20220721104027\"><code>BusinessActionContext</code> 便是指TCC事务上下文</p>\n</li>\n</ul>\n<pre class=\"code-block\" data-language=\"java\"><code class=\"hljs\">/**\n * 这里定义tcc的接口\n * 一定要定义在接口上\n * 我们使用springCloud的远程调用\n * 那么这里使用LocalTCC便可\n *\n * @author tanzj\n */\n@LocalTCC\npublic interface TccService {\n \n    /**\n     * 定义两阶段提交\n     * name = 该tcc的bean名称,全局唯一\n     * commitMethod = commit 为二阶段确认方法\n     * rollbackMethod = rollback 为二阶段取消方法\n     * BusinessActionContextParameter注解 传递参数到二阶段中\n     *\n     * @param params  -入参\n     * @return String\n     */\n    @TwoPhaseBusinessAction(name = &quot;insert&quot;, commitMethod = &quot;commitTcc&quot;, rollbackMethod = &quot;cancel&quot;)\n    String insert(\n            @BusinessActionContextParameter(paramName = &quot;params&quot;) Map&lt;String, String&gt; params\n    );\n \n    /**\n     * 确认方法、可以另命名，但要保证与commitMethod一致\n     * context可以传递try方法的参数\n     *\n     * @param context 上下文\n     * @return boolean\n     */\n    boolean commitTcc(BusinessActionContext context);\n \n    /**\n     * 二阶段取消方法\n     *\n     * @param context 上下文\n     * @return boolean\n     */\n    boolean cancel(BusinessActionContext context);\n}\n</code></pre>\n<h3 id=\"TCC接口的业务实现\">TCC接口的业务实现</h3>\n<p updated=\"20220721104027\">为了保证代码的简洁，此处将路由层与业务层结合讲解，实际项目则不然。</p>\n<ul updated=\"20220721104027\">\n<li id=\"20220721104027-96sy087\" updated=\"20220721104027\">\n<p updated=\"20220721104027\">在try方法中使用<code>@Transational</code>可以直接通过spring事务回滚关系型数据库中的操作，而非关系型数据库等中间件的回滚操作可以交给rollbackMethod方法处理。</p>\n</li>\n<li id=\"20220721104027-cvmklpl\" updated=\"20220721104027\">\n<p updated=\"20220721104027\">使用context.getActionContext(&quot;params&quot;)便可以得到一阶段try中定义的参数，在二阶段对此参数进行业务回滚操作。</p>\n</li>\n<li id=\"20220721104027-nfxity8\" updated=\"20220721104027\">\n<p updated=\"20220721104027\"><strong>注意1：</strong>此处亦不可以捕获异常（同理切面处理异常），否则TCC将识别该操作为成功，二阶段直接执行commitMethod。</p>\n</li>\n<li id=\"20220721104027-kezu022\" updated=\"20220721104027\">\n<p updated=\"20220721104027\"><strong>注意2：</strong>TCC模式要<strong>开发者自行</strong>保证幂等和事务防悬挂</p>\n</li>\n</ul>\n<pre class=\"code-block\" data-language=\"java\"><code class=\"hljs\">@Slf4j\n@RestController\npublic class TccServiceImpl implements  TccService {\n \n    @Autowired\n    TccDAO tccDAO;\n \n    /**\n     * tcc服务t（try）方法\n     * 根据实际业务场景选择实际业务执行逻辑或者资源预留逻辑\n     *\n     * @param params - name\n     * @return String\n     */\n    @Override\n    @PostMapping(&quot;/tcc-insert&quot;)\n    @Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRED)\n    public String insert(@RequestBody Map&lt;String, String&gt; params) {\n        log.info(&quot;xid = &quot; + RootContext.getXID());\n        //todo 实际的操作，或操作MQ、redis等\n        tccDAO.insert(params);\n        //放开以下注解抛出异常\n        //throw new RuntimeException(&quot;服务tcc测试回滚&quot;);\n        return &quot;success&quot;;\n    }\n \n    /**\n     * tcc服务 confirm方法\n     * 若一阶段采用资源预留，在二阶段确认时要提交预留的资源\n     *\n     * @param context 上下文\n     * @return boolean\n     */\n    @Override\n    public boolean commitTcc(BusinessActionContext context) {\n        log.info(&quot;xid = &quot; + context.getXid() + &quot;提交成功&quot;);\n        //todo 若一阶段资源预留，这里则要提交资源\n        return true;\n    }\n \n    /**\n     * tcc 服务 cancel方法\n     *\n     * @param context 上下文\n     * @return boolean\n     */\n    @Override\n    public boolean cancel(BusinessActionContext context) {\n        //todo 这里写中间件、非关系型数据库的回滚操作\n        System.out.println(&quot;please manually rollback this data:&quot; + context.getActionContext(&quot;params&quot;));\n        return true;\n    }\n}\n</code></pre>","articleNode":{"field":{"contentType":"topic","topic":"分布式解决方案"},"frontmatter":{"id":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/TCC模式","title":"TCC模式","date":"2022-04-26 16:00","absolute_path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/TCC模式"},"htmlAst":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"TCC模式"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"TCC 与 Seata AT 事务⼀样都是两阶段事务，它与 AT 事务的主要区别为："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"TCC 对业务代码侵⼊严重"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"每个阶段的数据操作都要⾃⼰进⾏编码来实现，事务框架⽆法⾃动处理。"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"TCC 性能更⾼"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"不必对数据加全局锁，允许多个事务同时操作数据。"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://image.ztianzeng.com/uPic/ecaeda572495e4ea5e308fb938a38fd5.png","alt":"ecaeda572495e4ea5e308fb938a38fd5"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Seata TCC整体是"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"两阶段提交"}]},{"type":"text","value":"的模型。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"⼀个分布式的全局事务，全局事务是由若⼲分⽀事务组成的，分⽀事务要满⾜"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"两阶段提交"}]},{"type":"text","value":"的模型要求，即需要每个分⽀事务都具备⾃⼰的："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"⼀阶段 prepare ⾏为"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"⼆阶段 commit 或 rollback ⾏为"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://image.ztianzeng.com/uPic/20220427100423.png","alt":""},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"TCC 模式，不依赖于底层数据资源的事务⽀持："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"⼀阶段 prepare ⾏为：调⽤ ⾃定义 的 prepare 逻辑。"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"⼆阶段 commit ⾏为：调⽤ ⾃定义 的 commit 逻辑。"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"⼆阶段 rollback ⾏为：调⽤ ⾃定义 的 rollback 逻辑。"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"TCC 模式，是指⽀持把"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"⾃定义"}]},{"type":"text","value":"的分⽀事务纳⼊到全局事务的管理中。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"第⼀阶段 Try"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"以账户服务为例，当下订单时要扣减⽤户账户⾦额："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"假如⽤户购买 100 元商品，要扣减 100 元。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://image.ztianzeng.com/uPic/20220427100935.png","alt":""},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"TCC 事务⾸先对这100元的扣减⾦额进⾏预留，或者说是先冻结这100元"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://image.ztianzeng.com/uPic/20220427101002.png","alt":""},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"第⼆阶段 Confirm"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"如果第⼀阶段能够顺利完成，那么说明“扣减⾦额”业务(分⽀事务)最终肯定 是可以成功的。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"当全局事务提交时， TC会控制当前分⽀事务进⾏提交，如 果提交失败，TC 会反复尝试，直到提交成功为⽌。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"当全局事务提交时，就可以使⽤冻结的⾦额来最终实现业务数据操作："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://image.ztianzeng.com/uPic/20220427101024.png","alt":""},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"第⼆阶段 Cancel"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"如果全局事务回滚，就把冻结的⾦额进⾏解冻，恢复到以前的状态，TC 会 控制当前分⽀事务回滚，如果回滚失败，TC 会反复尝试，直到回滚完成为⽌。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"assets/image-20220427101106-zhsw0mu.png","alt":"image.png"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"多个事务并发的情况"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"多个TCC全局事务允许并发，它们执⾏扣减⾦额时，只需要冻结各⾃的⾦额即可："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://image.ztianzeng.com/uPic/20220427101229.png","alt":""},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"SpringCloud集成TCC"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"定义TCC接口"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"由于我们使用的是 SpringCloud + Feign，Feign的调用基于http，因此此处我们使用"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@LocalTCC"}]},{"type":"text","value":"便可。值得注意的是，"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@LocalTCC"}]},{"type":"text","value":"一定需要注解在接口上，此接口可以是寻常的业务接口，只要实现了TCC的两阶段提交对应方法便可，TCC相关注解如下："}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@LocalTCC"}]},{"type":"text","value":" 适用于SpringCloud+Feign模式下的TCC"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@TwoPhaseBusinessAction"}]},{"type":"text","value":" 注解try方法，其中name为当前tcc方法的bean名称，写方法名便可（全局唯一），commitMethod指向提交方法，rollbackMethod指向事务回滚方法。指定好三个方法之后，seata会根据全局事务的成功或失败，去帮我们自动调用提交方法或者回滚方法。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@BusinessActionContextParameter"}]},{"type":"text","value":" 注解可以将参数传递到二阶段（commitMethod/rollbackMethod）的方法。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"BusinessActionContext"}]},{"type":"text","value":" 便是指TCC事务上下文"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","dark-default-dark"],"dataLanguage":"java","dataIndex":"0"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"/**"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" * 这里定义tcc的接口"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" * 一定要定义在接口上"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" * 我们使用springCloud的远程调用"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" * 那么这里使用LocalTCC便可"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" *"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@author"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" tanzj"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" */"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"@"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"LocalTCC"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"public"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"interface"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"TccService"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" {"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"    /**"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * 定义两阶段提交"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * name = 该tcc的bean名称,全局唯一"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * commitMethod = commit 为二阶段确认方法"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * rollbackMethod = rollback 为二阶段取消方法"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * BusinessActionContextParameter注解 传递参数到二阶段中"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     *"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@param"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"params"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"  -入参"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" String"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     */"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    @"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"TwoPhaseBusinessAction"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"(name = "}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"insert\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":", commitMethod = "}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"commitTcc\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":", rollbackMethod = "}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"cancel\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"String"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"insert"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"            @"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"BusinessActionContextParameter"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"(paramName = "}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"params\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":") "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"Map"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"String"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":", "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"String"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"> "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"params"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    );"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"    /**"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * 确认方法、可以另命名，但要保证与commitMethod一致"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * context可以传递try方法的参数"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     *"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@param"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" 上下文"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" boolean"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     */"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"boolean"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"commitTcc"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"BusinessActionContext"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":");"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"    /**"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * 二阶段取消方法"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     *"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@param"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" 上下文"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" boolean"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     */"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"boolean"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"cancel"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"BusinessActionContext"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":");"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"TCC接口的业务实现"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"为了保证代码的简洁，此处将路由层与业务层结合讲解，实际项目则不然。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"在try方法中使用"},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@Transational"}]},{"type":"text","value":"可以直接通过spring事务回滚关系型数据库中的操作，而非关系型数据库等中间件的回滚操作可以交给rollbackMethod方法处理。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"使用context.getActionContext(\"params\")便可以得到一阶段try中定义的参数，在二阶段对此参数进行业务回滚操作。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"**注意1：**此处亦不可以捕获异常（同理切面处理异常），否则TCC将识别该操作为成功，二阶段直接执行commitMethod。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"注意2："},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"TCC模式要"}]},{"type":"text","value":"开发者自行"}]},{"type":"text","value":"保证幂等和事务防悬挂"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","dark-default-dark"],"dataLanguage":"java","dataIndex":"1"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"@"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"Slf4j"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"@"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"RestController"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"public"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"class"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"TccServiceImpl"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"implements"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"TccService"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" {"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    @"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"Autowired"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"TccDAO"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"tccDAO"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"    /**"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * tcc服务t（try）方法"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * 根据实际业务场景选择实际业务执行逻辑或者资源预留逻辑"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     *"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@param"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"params"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" - name"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" String"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     */"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    @"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"Override"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    @"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"PostMapping"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"/tcc-insert\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    @"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"Transactional"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"(rollbackFor = "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"Exception"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"class"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":", propagation = "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"Propagation"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"REQUIRED"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"public"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"String"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"insert"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"(@"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"RequestBody"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"Map"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"String"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":", "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"String"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"> "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"params"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":") {"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"info"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"xid = \""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" + "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"RootContext"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"getXID"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"());"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"//todo 实际的操作，或操作MQ、redis等"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"tccDAO"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"insert"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"(params);"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"//放开以下注解抛出异常"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"//throw new RuntimeException(\"服务tcc测试回滚\");"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk15"]},"children":[{"type":"text","value":"return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"success\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    }"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"    /**"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * tcc服务 confirm方法"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * 若一阶段采用资源预留，在二阶段确认时要提交预留的资源"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     *"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@param"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" 上下文"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" boolean"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     */"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    @"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"Override"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"public"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"boolean"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"commitTcc"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"BusinessActionContext"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":") {"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"info"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"xid = \""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" + "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"getXid"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"() + "}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"提交成功\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":");"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"//todo 若一阶段资源预留，这里则要提交资源"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk15"]},"children":[{"type":"text","value":"return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"true"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    }"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"    /**"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * tcc 服务 cancel方法"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     *"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@param"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" 上下文"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     * "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"@return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":" boolean"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"     */"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    @"}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"Override"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"public"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"boolean"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"cancel"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"BusinessActionContext"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":") {"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3"]},"children":[{"type":"text","value":"//todo 这里写中间件、非关系型数据库的回滚操作"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"System"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"out"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"println"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"please manually rollback this data:\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" + "}]},{"type":"element","tagName":"span","properties":{"className":["mtk12"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk11"]},"children":[{"type":"text","value":"getActionContext"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk8"]},"children":[{"type":"text","value":"\"params\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"));"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"        "}]},{"type":"element","tagName":"span","properties":{"className":["mtk15"]},"children":[{"type":"text","value":"return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"true"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    }"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"style","properties":{"className":["grvsc-styles"]},"children":[{"type":"text","value":"\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .dark-default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .dark-default-dark .mtk3 { color: #6A9955; }\n  .dark-default-dark .mtk4 { color: #569CD6; }\n  .dark-default-dark .mtk1 { color: #D4D4D4; }\n  .dark-default-dark .mtk10 { color: #4EC9B0; }\n  .dark-default-dark .mtk12 { color: #9CDCFE; }\n  .dark-default-dark .mtk8 { color: #CE9178; }\n  .dark-default-dark .mtk11 { color: #DCDCAA; }\n  .dark-default-dark .mtk15 { color: #C586C0; }\n  .dark-default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n"}]}],"data":{"quirksMode":false}},"html":"<h1 id=\"TCC模式\">TCC模式</h1>\n<p updated=\"20220721104027\">TCC 与 Seata AT 事务⼀样都是两阶段事务，它与 AT 事务的主要区别为：</p>\n<ul updated=\"20220721104027\">\n<li id=\"20220721104027-eexpclh\" updated=\"20220721104027\">\n<p updated=\"20220721104027\">TCC 对业务代码侵⼊严重</p>\n<p updated=\"20220721104027\">每个阶段的数据操作都要⾃⼰进⾏编码来实现，事务框架⽆法⾃动处理。</p>\n</li>\n<li id=\"20220721104027-r993egn\" updated=\"20220721104027\">\n<p updated=\"20220721104027\">TCC 性能更⾼</p>\n<p updated=\"20220721104027\">不必对数据加全局锁，允许多个事务同时操作数据。</p>\n</li>\n</ul>\n<p updated=\"20220721104027\"><span class=\"img\"><img src=\"https://image.ztianzeng.com/uPic/ecaeda572495e4ea5e308fb938a38fd5.png\" alt=\"ecaeda572495e4ea5e308fb938a38fd5\" /></span></p>\n<p updated=\"20220721104027\">Seata TCC整体是<code>两阶段提交</code>的模型。</p>\n<p updated=\"20220721104027\">⼀个分布式的全局事务，全局事务是由若⼲分⽀事务组成的，分⽀事务要满⾜<code>两阶段提交</code>的模型要求，即需要每个分⽀事务都具备⾃⼰的：</p>\n<ul updated=\"20220721104027\">\n<li id=\"20220721104027-ltn9fnt\" updated=\"20220721104027\">\n<p updated=\"20220721104027\">⼀阶段 prepare ⾏为</p>\n</li>\n<li id=\"20220721104027-gyoxzc6\" updated=\"20220721104027\">\n<p updated=\"20220721104027\">⼆阶段 commit 或 rollback ⾏为</p>\n</li>\n</ul>\n<p updated=\"20220721104027\"><span class=\"img\"><img src=\"https://image.ztianzeng.com/uPic/20220427100423.png\" alt=\"\" /></span></p>\n<p updated=\"20220721104027\">TCC 模式，不依赖于底层数据资源的事务⽀持：</p>\n<ul updated=\"20220721104027\">\n<li id=\"20220721104027-m4la35d\" updated=\"20220721104027\">\n<p updated=\"20220721104027\">⼀阶段 prepare ⾏为：调⽤ ⾃定义 的 prepare 逻辑。</p>\n</li>\n<li id=\"20220721104027-b9nlm0l\" updated=\"20220721104027\">\n<p updated=\"20220721104027\">⼆阶段 commit ⾏为：调⽤ ⾃定义 的 commit 逻辑。</p>\n</li>\n<li id=\"20220721104027-7viaz0y\" updated=\"20220721104027\">\n<p updated=\"20220721104027\">⼆阶段 rollback ⾏为：调⽤ ⾃定义 的 rollback 逻辑。</p>\n</li>\n</ul>\n<p updated=\"20220721104027\">TCC 模式，是指⽀持把<code>⾃定义</code>的分⽀事务纳⼊到全局事务的管理中。</p>\n<h1 id=\"第-阶段-Try\">第⼀阶段 Try</h1>\n<p updated=\"20220721104027\">以账户服务为例，当下订单时要扣减⽤户账户⾦额：</p>\n<p updated=\"20220721104027\">假如⽤户购买 100 元商品，要扣减 100 元。</p>\n<p updated=\"20220721104027\"><span class=\"img\"><img src=\"https://image.ztianzeng.com/uPic/20220427100935.png\" alt=\"\" /></span></p>\n<p updated=\"20220721104027\">TCC 事务⾸先对这100元的扣减⾦额进⾏预留，或者说是先冻结这100元</p>\n<p updated=\"20220721104027\"><span class=\"img\"><img src=\"https://image.ztianzeng.com/uPic/20220427101002.png\" alt=\"\" /></span></p>\n<h1 id=\"第-阶段-Confirm\">第⼆阶段 Confirm</h1>\n<p updated=\"20220721104027\">如果第⼀阶段能够顺利完成，那么说明“扣减⾦额”业务(分⽀事务)最终肯定 是可以成功的。</p>\n<p updated=\"20220721104027\">当全局事务提交时， TC会控制当前分⽀事务进⾏提交，如 果提交失败，TC 会反复尝试，直到提交成功为⽌。</p>\n<p updated=\"20220721104027\">当全局事务提交时，就可以使⽤冻结的⾦额来最终实现业务数据操作：</p>\n<p updated=\"20220721104027\"><span class=\"img\"><img src=\"https://image.ztianzeng.com/uPic/20220427101024.png\" alt=\"\" /></span></p>\n<h1 id=\"第-阶段-Cancel\">第⼆阶段 Cancel</h1>\n<p updated=\"20220721104027\">如果全局事务回滚，就把冻结的⾦额进⾏解冻，恢复到以前的状态，TC 会 控制当前分⽀事务回滚，如果回滚失败，TC 会反复尝试，直到回滚完成为⽌。</p>\n<p updated=\"20220721104027\"><span class=\"img\"><img src=\"assets/image-20220427101106-zhsw0mu.png\" alt=\"image.png\" /></span></p>\n<h1 id=\"多个事务并发的情况\">多个事务并发的情况</h1>\n<p updated=\"20220721104027\">多个TCC全局事务允许并发，它们执⾏扣减⾦额时，只需要冻结各⾃的⾦额即可：</p>\n<p updated=\"20220721104027\"><span class=\"img\"><img src=\"https://image.ztianzeng.com/uPic/20220427101229.png\" alt=\"\" /></span></p>\n<h1 id=\"SpringCloud集成TCC\">SpringCloud集成TCC</h1>\n<h3 id=\"定义TCC接口\">定义TCC接口</h3>\n<p updated=\"20220721104027\">由于我们使用的是 SpringCloud + Feign，Feign的调用基于http，因此此处我们使用<code>@LocalTCC</code>便可。值得注意的是，<code>@LocalTCC</code>一定需要注解在接口上，此接口可以是寻常的业务接口，只要实现了TCC的两阶段提交对应方法便可，TCC相关注解如下：</p>\n<ul updated=\"20220721104027\">\n<li id=\"20220721104027-q708kob\" updated=\"20220721104027\">\n<p updated=\"20220721104027\"><code>@LocalTCC</code> 适用于SpringCloud+Feign模式下的TCC</p>\n</li>\n<li id=\"20220721104027-tib127x\" updated=\"20220721104027\">\n<p updated=\"20220721104027\"><code>@TwoPhaseBusinessAction</code> 注解try方法，其中name为当前tcc方法的bean名称，写方法名便可（全局唯一），commitMethod指向提交方法，rollbackMethod指向事务回滚方法。指定好三个方法之后，seata会根据全局事务的成功或失败，去帮我们自动调用提交方法或者回滚方法。</p>\n</li>\n<li id=\"20220721104027-jx3btsm\" updated=\"20220721104027\">\n<p updated=\"20220721104027\"><code>@BusinessActionContextParameter</code> 注解可以将参数传递到二阶段（commitMethod/rollbackMethod）的方法。</p>\n</li>\n<li id=\"20220721104027-6hypcrl\" updated=\"20220721104027\">\n<p updated=\"20220721104027\"><code>BusinessActionContext</code> 便是指TCC事务上下文</p>\n</li>\n</ul>\n<pre class=\"code-block\" data-language=\"java\"><code class=\"hljs\">/**\n * 这里定义tcc的接口\n * 一定要定义在接口上\n * 我们使用springCloud的远程调用\n * 那么这里使用LocalTCC便可\n *\n * @author tanzj\n */\n@LocalTCC\npublic interface TccService {\n \n    /**\n     * 定义两阶段提交\n     * name = 该tcc的bean名称,全局唯一\n     * commitMethod = commit 为二阶段确认方法\n     * rollbackMethod = rollback 为二阶段取消方法\n     * BusinessActionContextParameter注解 传递参数到二阶段中\n     *\n     * @param params  -入参\n     * @return String\n     */\n    @TwoPhaseBusinessAction(name = &quot;insert&quot;, commitMethod = &quot;commitTcc&quot;, rollbackMethod = &quot;cancel&quot;)\n    String insert(\n            @BusinessActionContextParameter(paramName = &quot;params&quot;) Map&lt;String, String&gt; params\n    );\n \n    /**\n     * 确认方法、可以另命名，但要保证与commitMethod一致\n     * context可以传递try方法的参数\n     *\n     * @param context 上下文\n     * @return boolean\n     */\n    boolean commitTcc(BusinessActionContext context);\n \n    /**\n     * 二阶段取消方法\n     *\n     * @param context 上下文\n     * @return boolean\n     */\n    boolean cancel(BusinessActionContext context);\n}\n</code></pre>\n<h3 id=\"TCC接口的业务实现\">TCC接口的业务实现</h3>\n<p updated=\"20220721104027\">为了保证代码的简洁，此处将路由层与业务层结合讲解，实际项目则不然。</p>\n<ul updated=\"20220721104027\">\n<li id=\"20220721104027-96sy087\" updated=\"20220721104027\">\n<p updated=\"20220721104027\">在try方法中使用<code>@Transational</code>可以直接通过spring事务回滚关系型数据库中的操作，而非关系型数据库等中间件的回滚操作可以交给rollbackMethod方法处理。</p>\n</li>\n<li id=\"20220721104027-cvmklpl\" updated=\"20220721104027\">\n<p updated=\"20220721104027\">使用context.getActionContext(&quot;params&quot;)便可以得到一阶段try中定义的参数，在二阶段对此参数进行业务回滚操作。</p>\n</li>\n<li id=\"20220721104027-nfxity8\" updated=\"20220721104027\">\n<p updated=\"20220721104027\"><strong>注意1：</strong>此处亦不可以捕获异常（同理切面处理异常），否则TCC将识别该操作为成功，二阶段直接执行commitMethod。</p>\n</li>\n<li id=\"20220721104027-kezu022\" updated=\"20220721104027\">\n<p updated=\"20220721104027\"><strong>注意2：</strong>TCC模式要<strong>开发者自行</strong>保证幂等和事务防悬挂</p>\n</li>\n</ul>\n<pre class=\"code-block\" data-language=\"java\"><code class=\"hljs\">@Slf4j\n@RestController\npublic class TccServiceImpl implements  TccService {\n \n    @Autowired\n    TccDAO tccDAO;\n \n    /**\n     * tcc服务t（try）方法\n     * 根据实际业务场景选择实际业务执行逻辑或者资源预留逻辑\n     *\n     * @param params - name\n     * @return String\n     */\n    @Override\n    @PostMapping(&quot;/tcc-insert&quot;)\n    @Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRED)\n    public String insert(@RequestBody Map&lt;String, String&gt; params) {\n        log.info(&quot;xid = &quot; + RootContext.getXID());\n        //todo 实际的操作，或操作MQ、redis等\n        tccDAO.insert(params);\n        //放开以下注解抛出异常\n        //throw new RuntimeException(&quot;服务tcc测试回滚&quot;);\n        return &quot;success&quot;;\n    }\n \n    /**\n     * tcc服务 confirm方法\n     * 若一阶段采用资源预留，在二阶段确认时要提交预留的资源\n     *\n     * @param context 上下文\n     * @return boolean\n     */\n    @Override\n    public boolean commitTcc(BusinessActionContext context) {\n        log.info(&quot;xid = &quot; + context.getXid() + &quot;提交成功&quot;);\n        //todo 若一阶段资源预留，这里则要提交资源\n        return true;\n    }\n \n    /**\n     * tcc 服务 cancel方法\n     *\n     * @param context 上下文\n     * @return boolean\n     */\n    @Override\n    public boolean cancel(BusinessActionContext context) {\n        //todo 这里写中间件、非关系型数据库的回滚操作\n        System.out.println(&quot;please manually rollback this data:&quot; + context.getActionContext(&quot;params&quot;));\n        return true;\n    }\n}\n</code></pre>","headings":[{"depth":1,"value":"TCC模式"},{"depth":1,"value":"第⼀阶段 Try"},{"depth":1,"value":"第⼆阶段 Confirm"},{"depth":1,"value":"第⼆阶段 Cancel"},{"depth":1,"value":"多个事务并发的情况"},{"depth":1,"value":"SpringCloud集成TCC"},{"depth":3,"value":"定义TCC接口"},{"depth":3,"value":"TCC接口的业务实现"}],"path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/TCC模式"},"tree":{"title":"分布式解决方案","id":"20220421194022-kfiadau","parentId":"","href":"/topic/分布式解决方案","path":"/topic/分布式解决方案","children":[{"title":"分布式理论","id":"20220429135957-770gm7n","type":"d","href":"/topic/分布式解决方案/分布式理论","parentId":"","path":"/topic/分布式解决方案/分布式理论","parentPath":"/topic/分布式解决方案","sort":1,"children":[{"title":"分布式特性","id":"20220429140350-6b6azr1","type":"h","href":"/topic/分布式解决方案/分布式理论#分布式特性","parentId":"20220429135957-770gm7n","path":"/topic/分布式解决方案/分布式理论","parentPath":"/topic/分布式解决方案","children":[],"level":2},{"title":"分布式分类","id":"20220429140406-78xx1c9","type":"h","href":"/topic/分布式解决方案/分布式理论#分布式分类","parentId":"20220429135957-770gm7n","path":"/topic/分布式解决方案/分布式理论","parentPath":"/topic/分布式解决方案","children":[],"level":2},{"title":"分布式面临的问题","id":"20220429140249-e8i2v67","type":"h","href":"/topic/分布式解决方案/分布式理论#分布式面临的问题","parentId":"20220429135957-770gm7n","path":"/topic/分布式解决方案/分布式理论","parentPath":"/topic/分布式解决方案","children":[],"level":2},{"title":"三驾马车","id":"20220504221043-ndzz22d","type":"d","href":"/topic/分布式解决方案/分布式理论/三驾马车","parentId":"","path":"/topic/分布式解决方案/分布式理论/三驾马车","parentPath":"/topic/分布式解决方案/分布式理论","sort":0,"children":[{"title":"The Google File System","id":"20220505103842-h8stgqv","type":"d","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentId":"","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","sort":1,"children":[{"title":"摘要","id":"20220505152643-eyjn600","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#摘要","parentId":"20220505103842-h8stgqv","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":4},{"title":"1. 引言","id":"20220505152904-rl9r12t","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#1. 引言","parentId":"20220505103842-h8stgqv","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":4},{"title":"2. 设计概述","id":"20220505153057-6we6q9e","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#2. 设计概述","parentId":"20220505103842-h8stgqv","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"2.1 假设","id":"20220505153214-w97a5eq","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#2.1 假设","parentId":"20220505153057-6we6q9e","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"2.2 接口","id":"20220505153342-qrfyhd0","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#2.2 接口","parentId":"20220505153057-6we6q9e","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"2.3 架构","id":"20220505153427-yczpia1","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#2.3 架构","parentId":"20220505153057-6we6q9e","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"2.4 单master","id":"20220505153634-wr9cy7v","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#2.4 单master","parentId":"20220505153057-6we6q9e","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"2.5 chunk大小","id":"20220505153645-9j42aj9","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#2.5 chunk大小","parentId":"20220505153057-6we6q9e","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"2.6 元数据","id":"20220505153729-j7mr5sy","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#2.6 元数据","parentId":"20220505153057-6we6q9e","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"2.6.1 内存数据结构","id":"20220505153748-93wb5sv","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#2.6.1 内存数据结构","parentId":"20220505153729-j7mr5sy","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6},{"title":"2.6.2 chunk位置","id":"20220505153811-hrhktlx","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#2.6.2 chunk位置","parentId":"20220505153729-j7mr5sy","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6},{"title":"2.6.3 操作日志","id":"20220505161734-xlmd7en","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#2.6.3 操作日志","parentId":"20220505153729-j7mr5sy","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6}],"level":5},{"title":"2.7 一致性模型","id":"20220505161748-vaevsko","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#2.7 一致性模型","parentId":"20220505153057-6we6q9e","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"2.7.1 GFS提供的保证","id":"20220505161839-noqow5b","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#2.7.1 GFS提供的保证","parentId":"20220505161748-vaevsko","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6},{"title":"2.7.2 对应用程序的影响","id":"20220505162841-92zpdr4","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#2.7.2 对应用程序的影响","parentId":"20220505161748-vaevsko","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6}],"level":5},{"title":"3. 系统交互","id":"20220505163026-ti0u1cw","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#3. 系统交互","parentId":"20220505153057-6we6q9e","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"3.1 租约和变更顺序","id":"20220505163040-8lpawj0","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#3.1 租约和变更顺序","parentId":"20220505163026-ti0u1cw","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6}],"level":5},{"title":"3.2 数据流","id":"20220505163142-diazjgy","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#3.2 数据流","parentId":"20220505153057-6we6q9e","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"3.3 原子性record append","id":"20220505163435-8p1rdvc","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#3.3 原子性record append","parentId":"20220505153057-6we6q9e","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"3.4 快照","id":"20220505163529-7ewyign","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#3.4 快照","parentId":"20220505153057-6we6q9e","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5}],"level":4},{"title":"4. master操作","id":"20220505163645-gowcg06","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#4. master操作","parentId":"20220505103842-h8stgqv","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"4.1 命名空间管理与锁","id":"20220505163711-92uz3lb","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#4.1 命名空间管理与锁","parentId":"20220505163645-gowcg06","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"4.2 副本分配","id":"20220505164434-f0me82e","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#4.2 副本分配","parentId":"20220505163645-gowcg06","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"4.3 chunk创建、重做副本、重均衡","id":"20220505164453-s8eah39","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#4.3 chunk创建、重做副本、重均衡","parentId":"20220505163645-gowcg06","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"4.4 垃圾回收","id":"20220505164538-dlh214d","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#4.4 垃圾回收","parentId":"20220505163645-gowcg06","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"4.4.1 垃圾回收机制","id":"20220505164549-s9k32j3","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#4.4.1 垃圾回收机制","parentId":"20220505164538-dlh214d","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6},{"title":"4.4.2 关于垃圾回收的讨论","id":"20220505164604-fp0gkjf","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#4.4.2 关于垃圾回收的讨论","parentId":"20220505164538-dlh214d","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6}],"level":5},{"title":"4.5 陈旧副本检测","id":"20220505164624-4408wed","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#4.5 陈旧副本检测","parentId":"20220505163645-gowcg06","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5}],"level":4},{"title":"5. 错误容忍与诊断","id":"20220505164640-h5ye4s1","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#5. 错误容忍与诊断","parentId":"20220505103842-h8stgqv","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"5.1 高可用","id":"20220505164708-jcnd7d4","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#5.1 高可用","parentId":"20220505164640-h5ye4s1","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"5.1.1 快速恢复","id":"20220505164724-ouwncwl","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#5.1.1 快速恢复","parentId":"20220505164708-jcnd7d4","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6},{"title":"5.1.2 chunk副本","id":"20220505164753-mjqssd7","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#5.1.2 chunk副本","parentId":"20220505164708-jcnd7d4","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6},{"title":"5.1.3 master副本","id":"20220505164839-qlp5rqu","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#5.1.3 master副本","parentId":"20220505164708-jcnd7d4","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6}],"level":5},{"title":"5.2 数据完整性","id":"20220505164854-3knwav7","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#5.2 数据完整性","parentId":"20220505164640-h5ye4s1","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"5.3 诊断工具","id":"20220505164921-ev1pe72","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#5.3 诊断工具","parentId":"20220505164640-h5ye4s1","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5}],"level":4},{"title":"6. 性能测试","id":"20220505165140-trykuy8","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#6. 性能测试","parentId":"20220505103842-h8stgqv","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"6.1 小批量benchmark","id":"20220505165202-gik63pp","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#6.1 小批量benchmark","parentId":"20220505165140-trykuy8","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"6.1.1 read操作","id":"20220505165851-77tf82y","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#6.1.1 read操作","parentId":"20220505165202-gik63pp","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6},{"title":"6.1.2 write操作","id":"20220505165929-ffk2ljm","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#6.1.2 write操作","parentId":"20220505165202-gik63pp","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6},{"title":"6.1.3 record append操作","id":"20220505170023-obbtkp5","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#6.1.3 record append操作","parentId":"20220505165202-gik63pp","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6}],"level":5},{"title":"6.2 现实中的集群","id":"20220505170044-clials5","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#6.2 现实中的集群","parentId":"20220505165140-trykuy8","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"6.2.1 存储","id":"20220505170057-d7b2dlb","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#6.2.1 存储","parentId":"20220505170044-clials5","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6},{"title":"6.2.2 元数据","id":"20220505170719-44kebtz","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#6.2.2 元数据","parentId":"20220505170044-clials5","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6},{"title":"6.2.3 读写速率","id":"20220505170734-2akl3y5","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#6.2.3 读写速率","parentId":"20220505170044-clials5","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6},{"title":"6.2.4 master的负载","id":"20220505171006-n84v4np","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#6.2.4 master的负载","parentId":"20220505170044-clials5","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6},{"title":"6.2.5 恢复时间","id":"20220505171023-dg0klta","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#6.2.5 恢复时间","parentId":"20220505170044-clials5","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6}],"level":5},{"title":"6.3 负载分解","id":"20220505171050-basmhn2","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#6.3 负载分解","parentId":"20220505165140-trykuy8","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"6.3.1 方法和注意事项","id":"20220505171105-6nknprd","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#6.3.1 方法和注意事项","parentId":"20220505171050-basmhn2","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6},{"title":"6.3.2 chunkserver的负载","id":"20220505171126-1zjmvl7","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#6.3.2 chunkserver的负载","parentId":"20220505171050-basmhn2","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6},{"title":"6.3.3 append vs write","id":"20220505171730-8fgjqne","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#6.3.3 append vs write","parentId":"20220505171050-basmhn2","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6},{"title":"6.3.4 master的负载","id":"20220505172435-d8y3uer","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#6.3.4 master的负载","parentId":"20220505171050-basmhn2","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6}],"level":5}],"level":4},{"title":"7. 开发经历","id":"20220505172855-ihmv36c","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#7. 开发经历","parentId":"20220505103842-h8stgqv","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":4},{"title":"8. 相关工作","id":"20220505173054-kl64sam","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#8. 相关工作","parentId":"20220505103842-h8stgqv","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":4},{"title":"9. 结论","id":"20220505173109-2jh06vo","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#9. 结论","parentId":"20220505103842-h8stgqv","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":4},{"title":"致谢","id":"20220505173109-hcnaqtk","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#致谢","parentId":"20220505103842-h8stgqv","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":4},{"title":"参考文献","id":"20220505173132-jfdphbx","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System#参考文献","parentId":"20220505103842-h8stgqv","path":"/topic/分布式解决方案/分布式理论/三驾马车/The Google File System","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":4}],"level":3},{"title":"BigTable中文翻译","id":"20220516160557-fxzscu9","type":"d","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentId":"","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","sort":2,"children":[{"title":"1 摘要","id":"20220516160557-umz7qne","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#1 摘要","parentId":"20220516160557-fxzscu9","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":4},{"title":"2 介绍","id":"20220516163425-yd815aj","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#2 介绍","parentId":"20220516160557-fxzscu9","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":4},{"title":"3 数据模型","id":"20220516164133-iriclv2","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#3 数据模型","parentId":"20220516160557-fxzscu9","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"3.1 行","id":"20220516165146-4hgxip8","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#3.1 行","parentId":"20220516164133-iriclv2","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"3.2 列族","id":"20220516170835-vl6rjd2","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#3.2 列族","parentId":"20220516164133-iriclv2","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"3.3 时间戳","id":"20220516170930-mx82b65","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#3.3 时间戳","parentId":"20220516164133-iriclv2","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5}],"level":4},{"title":"4 API","id":"20220516171003-9ekohjf","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#4 API","parentId":"20220516160557-fxzscu9","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":4},{"title":"5 BigTable 构件","id":"20220516171243-p6llvpp","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#5 BigTable 构件","parentId":"20220516160557-fxzscu9","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":4},{"title":"6 介绍","id":"20220516171430-ie9o4og","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#6 介绍","parentId":"20220516160557-fxzscu9","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"6.1 Tablet 的位置","id":"20220516171900-ykrafld","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#6.1 Tablet 的位置","parentId":"20220516171430-ie9o4og","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"6.2 Tablet 分配","id":"20220516174913-32fi063","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#6.2 Tablet 分配","parentId":"20220516171430-ie9o4og","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"6.3 Tablet服务","id":"20220516190925-hqcobsg","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#6.3 Tablet服务","parentId":"20220516171430-ie9o4og","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"6.4 空间收缩","id":"20220516191452-8mjvmm3","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#6.4 空间收缩","parentId":"20220516171430-ie9o4og","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5}],"level":4},{"title":"7 优化","id":"20220516191623-d3wj1oi","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#7 优化","parentId":"20220516160557-fxzscu9","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"7.1 局部性群组","id":"20220516191656-pk7dxu1","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#7.1 局部性群组","parentId":"20220516191623-d3wj1oi","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"7.2 压缩","id":"20220516191901-lhpmx4v","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#7.2 压缩","parentId":"20220516191623-d3wj1oi","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"7.3 通过缓存提高读操作的性能","id":"20220516192034-f3othrg","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#7.3 通过缓存提高读操作的性能","parentId":"20220516191623-d3wj1oi","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"7.3.1 Bloom 过滤器","id":"20220516192205-3iumls8","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#7.3.1 Bloom 过滤器","parentId":"20220516192034-f3othrg","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6},{"title":"7.3.2 Commit 日志的实现","id":"20220516192429-ey2mdt4","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#7.3.2 Commit 日志的实现","parentId":"20220516192034-f3othrg","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6},{"title":"7.3.3 Tablet 恢复提速","id":"20220516192728-nf77i1p","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#7.3.3 Tablet 恢复提速","parentId":"20220516192034-f3othrg","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6},{"title":"7.3.4 利用不变性","id":"20220516192754-4vievj9","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#7.3.4 利用不变性","parentId":"20220516192034-f3othrg","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6}],"level":5}],"level":4},{"title":"8 性能评估","id":"20220516192913-3gxq79q","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#8 性能评估","parentId":"20220516160557-fxzscu9","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"8.1 单个 Tablet 服务器的性能","id":"20220516193231-nhnixh9","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#8.1 单个 Tablet 服务器的性能","parentId":"20220516192913-3gxq79q","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"8.2 性能提升","id":"20220516193308-x93x1b9","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#8.2 性能提升","parentId":"20220516192913-3gxq79q","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5}],"level":4},{"title":"9 实际应用","id":"20220516193444-d1w8t29","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#9 实际应用","parentId":"20220516160557-fxzscu9","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"9.1 Google Analytics","id":"20220516193603-m38lvlw","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#9.1 Google Analytics","parentId":"20220516193444-d1w8t29","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"9.2 Google Earth","id":"20220516193726-mtgboqj","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#9.2 Google Earth","parentId":"20220516193444-d1w8t29","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"9.3 个性化查询","id":"20220516193837-b111cn5","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#9.3 个性化查询","parentId":"20220516193444-d1w8t29","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5}],"level":4},{"title":"10 经验教训","id":"20220516193901-qaxm1vk","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#10 经验教训","parentId":"20220516160557-fxzscu9","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":4},{"title":"11 相关工作","id":"20220516194041-hpvjwcj","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#11 相关工作","parentId":"20220516160557-fxzscu9","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":4},{"title":"12 结论","id":"20220516194122-qq6envs","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译#12 结论","parentId":"20220516160557-fxzscu9","path":"/topic/分布式解决方案/分布式理论/三驾马车/BigTable中文翻译","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":4}],"level":3},{"title":"MapReduce","id":"20220504221049-bsx93ro","type":"d","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentId":"","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","sort":3,"children":[{"title":"摘要","id":"20220505103937-lcjd3e9","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#摘要","parentId":"20220504221049-bsx93ro","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":4},{"title":"引言","id":"20220505105240-h98eljj","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#引言","parentId":"20220504221049-bsx93ro","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":4},{"title":"编程模型","id":"20220505105313-qdf9dwb","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#编程模型","parentId":"20220504221049-bsx93ro","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"示例","id":"20220505105345-xb9fho4","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#示例","parentId":"20220505105313-qdf9dwb","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"类型","id":"20220505105409-cotrg62","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#类型","parentId":"20220505105313-qdf9dwb","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"更多示例","id":"20220505105510-rrmkrqj","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#更多示例","parentId":"20220505105313-qdf9dwb","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5}],"level":4},{"title":"实现","id":"20220505105527-grlt532","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#实现","parentId":"20220504221049-bsx93ro","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"执行概览","id":"20220505105617-4qkjy1k","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#执行概览","parentId":"20220505105527-grlt532","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"master数据结构","id":"20220505105655-2hwm0mm","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#master数据结构","parentId":"20220505105527-grlt532","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"容错","id":"20220505105705-9rdwqcc","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#容错","parentId":"20220505105527-grlt532","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"worker故障","id":"20220505105719-3zo4wh1","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#worker故障","parentId":"20220505105705-9rdwqcc","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6},{"title":"master故障","id":"20220505105744-cbyzz77","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#master故障","parentId":"20220505105705-9rdwqcc","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6},{"title":"故障出现时的语义","id":"20220505105808-fuywl8f","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#故障出现时的语义","parentId":"20220505105705-9rdwqcc","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":6}],"level":5},{"title":"位置分配","id":"20220505130944-of8p0mr","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#位置分配","parentId":"20220505105527-grlt532","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"任务粒度","id":"20220505130958-lr3jevt","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#任务粒度","parentId":"20220505105527-grlt532","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"任务副本","id":"20220505131009-br4h0pt","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#任务副本","parentId":"20220505105527-grlt532","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5}],"level":4},{"title":"改进","id":"20220505131032-odfu8ql","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#改进","parentId":"20220504221049-bsx93ro","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"分区函数","id":"20220505131041-2qvplqj","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#分区函数","parentId":"20220505131032-odfu8ql","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"有序性保证","id":"20220505131049-tiorqxo","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#有序性保证","parentId":"20220505131032-odfu8ql","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"合并函数","id":"20220505131059-wsjue5k","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#合并函数","parentId":"20220505131032-odfu8ql","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"输入输出类型","id":"20220505131107-pxvub0b","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#输入输出类型","parentId":"20220505131032-odfu8ql","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"附属输出","id":"20220505131114-3yduwfi","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#附属输出","parentId":"20220505131032-odfu8ql","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"跳过损坏的记录","id":"20220505131125-zonvz4w","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#跳过损坏的记录","parentId":"20220505131032-odfu8ql","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"本地执行","id":"20220505131135-42q9tl4","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#本地执行","parentId":"20220505131032-odfu8ql","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"状态信息","id":"20220505131142-vpljqdj","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#状态信息","parentId":"20220505131032-odfu8ql","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"计数器","id":"20220505131209-f81652i","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#计数器","parentId":"20220505131032-odfu8ql","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5}],"level":4},{"title":"性能","id":"20220505131220-bm5qhxg","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#性能","parentId":"20220504221049-bsx93ro","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"集群配置","id":"20220505131228-j20o361","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#集群配置","parentId":"20220505131220-bm5qhxg","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"grep","id":"20220505131240-lt3z5n1","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#grep","parentId":"20220505131220-bm5qhxg","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"sort","id":"20220505131405-ooockqn","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#sort","parentId":"20220505131220-bm5qhxg","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"任务副本的影响","id":"20220505131601-vd5n8aj","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#任务副本的影响","parentId":"20220505131220-bm5qhxg","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5},{"title":"机器故障","id":"20220505131621-npqjp4d","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#机器故障","parentId":"20220505131220-bm5qhxg","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5}],"level":4},{"title":"研发经历","id":"20220505131629-tx69y5r","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#研发经历","parentId":"20220504221049-bsx93ro","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[{"title":"大规模索引","id":"20220505131730-fgwb5p0","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#大规模索引","parentId":"20220505131629-tx69y5r","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":5}],"level":4},{"title":"相关工作","id":"20220505131750-fua8vue","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#相关工作","parentId":"20220504221049-bsx93ro","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":4},{"title":"结论","id":"20220505131810-mv3x4nv","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#结论","parentId":"20220504221049-bsx93ro","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":4},{"title":"致谢","id":"20220505131810-zu3sj0f","type":"h","href":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce#致谢","parentId":"20220504221049-bsx93ro","path":"/topic/分布式解决方案/分布式理论/三驾马车/MapReduce","parentPath":"/topic/分布式解决方案/分布式理论/三驾马车","children":[],"level":4}],"level":3}],"level":2},{"title":"理论基础","id":"20220421202816-shcixtm","type":"d","href":"/topic/分布式解决方案/分布式理论/理论基础","parentId":"","path":"/topic/分布式解决方案/分布式理论/理论基础","parentPath":"/topic/分布式解决方案/分布式理论","sort":1,"children":[{"title":"CAP定理","id":"20220421194022-lgdnhqq","type":"h","href":"/topic/分布式解决方案/分布式理论/理论基础#CAP定理","parentId":"20220421202816-shcixtm","path":"/topic/分布式解决方案/分布式理论/理论基础","parentPath":"/topic/分布式解决方案/分布式理论","children":[{"title":"一致性","id":"20220421194022-us5g6gf","type":"h","href":"/topic/分布式解决方案/分布式理论/理论基础#一致性","parentId":"20220421194022-lgdnhqq","path":"/topic/分布式解决方案/分布式理论/理论基础","parentPath":"/topic/分布式解决方案/分布式理论","children":[],"level":4},{"title":"可用性","id":"20220421194022-kv51un6","type":"h","href":"/topic/分布式解决方案/分布式理论/理论基础#可用性","parentId":"20220421194022-lgdnhqq","path":"/topic/分布式解决方案/分布式理论/理论基础","parentPath":"/topic/分布式解决方案/分布式理论","children":[],"level":4},{"title":"分区容错性","id":"20220421194022-0fbmm72","type":"h","href":"/topic/分布式解决方案/分布式理论/理论基础#分区容错性","parentId":"20220421194022-lgdnhqq","path":"/topic/分布式解决方案/分布式理论/理论基础","parentPath":"/topic/分布式解决方案/分布式理论","children":[],"level":4}],"level":3},{"title":"CAP权衡","id":"20220421194022-s2yw4om","type":"h","href":"/topic/分布式解决方案/分布式理论/理论基础#CAP权衡","parentId":"20220421202816-shcixtm","path":"/topic/分布式解决方案/分布式理论/理论基础","parentPath":"/topic/分布式解决方案/分布式理论","children":[],"level":3},{"title":"BASE定理","id":"20220421194022-ugtbzuw","type":"h","href":"/topic/分布式解决方案/分布式理论/理论基础#BASE定理","parentId":"20220421202816-shcixtm","path":"/topic/分布式解决方案/分布式理论/理论基础","parentPath":"/topic/分布式解决方案/分布式理论","children":[{"title":"Basically Available（基本可⽤）","id":"20220421194022-hx4rr6j","type":"h","href":"/topic/分布式解决方案/分布式理论/理论基础#Basically Available（基本可⽤）","parentId":"20220421194022-ugtbzuw","path":"/topic/分布式解决方案/分布式理论/理论基础","parentPath":"/topic/分布式解决方案/分布式理论","children":[],"level":4},{"title":"Soft state（软状态）","id":"20220421194022-rficqdw","type":"h","href":"/topic/分布式解决方案/分布式理论/理论基础#Soft state（软状态）","parentId":"20220421194022-ugtbzuw","path":"/topic/分布式解决方案/分布式理论/理论基础","parentPath":"/topic/分布式解决方案/分布式理论","children":[],"level":4},{"title":"Eventually consistent（最终⼀致性）","id":"20220421194022-ywkpga3","type":"h","href":"/topic/分布式解决方案/分布式理论/理论基础#Eventually consistent（最终⼀致性）","parentId":"20220421194022-ugtbzuw","path":"/topic/分布式解决方案/分布式理论/理论基础","parentPath":"/topic/分布式解决方案/分布式理论","children":[],"level":4}],"level":3},{"title":"BASE理论的特点","id":"20220421194022-4710eie","type":"h","href":"/topic/分布式解决方案/分布式理论/理论基础#BASE理论的特点","parentId":"20220421202816-shcixtm","path":"/topic/分布式解决方案/分布式理论/理论基础","parentPath":"/topic/分布式解决方案/分布式理论","children":[],"level":3},{"title":"ACID 和 BASE 的区别与联系","id":"20220421194022-7ykvvqi","type":"h","href":"/topic/分布式解决方案/分布式理论/理论基础#ACID 和 BASE 的区别与联系","parentId":"20220421202816-shcixtm","path":"/topic/分布式解决方案/分布式理论/理论基础","parentPath":"/topic/分布式解决方案/分布式理论","children":[],"level":3}],"level":2},{"title":"共识算法","id":"20220429140840-qysmevv","type":"d","href":"/topic/分布式解决方案/分布式理论/共识算法","parentId":"","path":"/topic/分布式解决方案/分布式理论/共识算法","parentPath":"/topic/分布式解决方案/分布式理论","sort":2,"children":[{"title":"Raft算法","id":"20220429141001-rpid265","type":"d","href":"/topic/分布式解决方案/分布式理论/共识算法/Raft算法","parentId":"","path":"/topic/分布式解决方案/分布式理论/共识算法/Raft算法","parentPath":"/topic/分布式解决方案/分布式理论/共识算法","children":[],"level":3},{"title":"Paxos算法","id":"20220429141011-92v98k0","type":"d","href":"/topic/分布式解决方案/分布式理论/共识算法/Paxos算法","parentId":"","path":"/topic/分布式解决方案/分布式理论/共识算法/Paxos算法","parentPath":"/topic/分布式解决方案/分布式理论/共识算法","children":[],"level":3}],"level":2},{"title":"通讯协议-Gossip","id":"20220429141408-iesct3f","type":"d","href":"/topic/分布式解决方案/分布式理论/通讯协议-Gossip","parentId":"","path":"/topic/分布式解决方案/分布式理论/通讯协议-Gossip","parentPath":"/topic/分布式解决方案/分布式理论","sort":3,"children":[],"level":2}],"level":1},{"title":"流量调度","id":"20220429141613-wbxi2uw","type":"d","href":"/topic/分布式解决方案/流量调度","parentId":"","path":"/topic/分布式解决方案/流量调度","parentPath":"/topic/分布式解决方案","sort":2,"children":[{"title":"流量控制","id":"20220429141625-6pv8964","type":"d","href":"/topic/分布式解决方案/流量调度/流量控制","parentId":"","path":"/topic/分布式解决方案/流量调度/流量控制","parentPath":"/topic/分布式解决方案/流量调度","sort":1,"children":[],"level":2},{"title":"服务路由","id":"20220429141647-rhppejp","type":"d","href":"/topic/分布式解决方案/流量调度/服务路由","parentId":"","path":"/topic/分布式解决方案/流量调度/服务路由","parentPath":"/topic/分布式解决方案/流量调度","sort":2,"children":[],"level":2},{"title":"负载均衡","id":"20220429141638-us0mqmb","type":"d","href":"/topic/分布式解决方案/流量调度/负载均衡","parentId":"","path":"/topic/分布式解决方案/流量调度/负载均衡","parentPath":"/topic/分布式解决方案/流量调度","sort":3,"children":[],"level":2}],"level":1},{"title":"数据调度","id":"20220429141727-g27lor1","type":"d","href":"/topic/分布式解决方案/数据调度","parentId":"","path":"/topic/分布式解决方案/数据调度","parentPath":"/topic/分布式解决方案","sort":3,"children":[{"title":"分布式缓存","id":"20220429141810-k5iup7v","type":"d","href":"/topic/分布式解决方案/数据调度/分布式缓存","parentId":"","path":"/topic/分布式解决方案/数据调度/分布式缓存","parentPath":"/topic/分布式解决方案/数据调度","sort":1,"children":[],"level":2},{"title":"数据库","id":"20220429141819-ylczf3x","type":"d","href":"/topic/分布式解决方案/数据调度/数据库","parentId":"","path":"/topic/分布式解决方案/数据调度/数据库","parentPath":"/topic/分布式解决方案/数据调度","sort":2,"children":[],"level":2},{"title":"分布式事务","id":"20220421194022-xmjo91m","type":"d","href":"/topic/分布式解决方案/数据调度/分布式事务","parentId":"","path":"/topic/分布式解决方案/数据调度/分布式事务","parentPath":"/topic/分布式解决方案/数据调度","sort":4,"children":[{"title":"事务分类","id":"20220422211743-d9h1h4g","type":"d","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","parentId":"","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","parentPath":"/topic/分布式解决方案/数据调度/分布式事务","sort":2,"children":[{"title":"刚性事务","id":"20220421194022-4srmmfd","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类#刚性事务","parentId":"20220422211743-d9h1h4g","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","parentPath":"/topic/分布式解决方案/数据调度/分布式事务","children":[],"level":4},{"title":"柔性事务","id":"20220421194022-s4gh03z","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类#柔性事务","parentId":"20220422211743-d9h1h4g","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","parentPath":"/topic/分布式解决方案/数据调度/分布式事务","children":[],"level":4},{"title":"刚性事务的实现","id":"20220423180932-i5c8gry","type":"d","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/刚性事务的实现","parentId":"","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/刚性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","sort":1,"children":[{"title":"2PC(标准XA模型)","id":"20220423180940-j94vqjc","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/刚性事务的实现#2PC(标准XA模型)","parentId":"20220423180932-i5c8gry","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/刚性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[{"title":"阶段⼀：提交事务请求","id":"20220423180940-0w8g7kd","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/刚性事务的实现#阶段⼀：提交事务请求","parentId":"20220423180940-j94vqjc","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/刚性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[],"level":6},{"title":"阶段⼆：执⾏事务提交","id":"20220423180940-unw5awm","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/刚性事务的实现#阶段⼆：执⾏事务提交","parentId":"20220423180940-j94vqjc","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/刚性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[],"level":6},{"title":"二阶段的优缺点","id":"20220423180940-p40kvug","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/刚性事务的实现#二阶段的优缺点","parentId":"20220423180940-j94vqjc","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/刚性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[],"level":6}],"level":5},{"title":"3PC","id":"20220423180940-gs7otw2","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/刚性事务的实现#3PC","parentId":"20220423180932-i5c8gry","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/刚性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[{"title":"阶段⼀：CanCommit","id":"20220423180940-qdofyw8","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/刚性事务的实现#阶段⼀：CanCommit","parentId":"20220423180940-gs7otw2","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/刚性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[],"level":6},{"title":"阶段⼆：PreCommit","id":"20220423180940-rpcq3av","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/刚性事务的实现#阶段⼆：PreCommit","parentId":"20220423180940-gs7otw2","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/刚性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[],"level":6},{"title":"阶段三：doCommit","id":"20220423180940-nhp5paq","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/刚性事务的实现#阶段三：doCommit","parentId":"20220423180940-gs7otw2","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/刚性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[],"level":6}],"level":5},{"title":"2PC和3PC的区别","id":"20220423180940-0uvutgg","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/刚性事务的实现#2PC和3PC的区别","parentId":"20220423180932-i5c8gry","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/刚性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[],"level":5}],"level":4},{"title":"柔性事务的实现","id":"20220423215330-3iq8jdi","type":"d","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentId":"","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","sort":2,"children":[{"title":"柔性事务的分类","id":"20220423215701-eorkz50","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#柔性事务的分类","parentId":"20220423215330-3iq8jdi","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[{"title":"通知型事务","id":"20220424140207-63rfn0i","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#通知型事务","parentId":"20220423215701-eorkz50","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[{"title":"异步确保型事务","id":"20220424141734-ssqxhgg","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#异步确保型事务","parentId":"20220424140207-63rfn0i","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[{"title":"MQ事务消息","id":"20220424144320-vvl8bhn","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#MQ事务消息","parentId":"20220424141734-ssqxhgg","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[],"level":8},{"title":"本地消息表","id":"20220424150800-s3n6tgw","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#本地消息表","parentId":"20220424141734-ssqxhgg","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[],"level":8},{"title":"MQ事务消息 VS 本地消息表","id":"20220424151513-a09myd0","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#MQ事务消息 VS 本地消息表","parentId":"20220424141734-ssqxhgg","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[],"level":8}],"level":7}],"level":6},{"title":"通知型事务的问题","id":"20220424152118-6uac32f","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#通知型事务的问题","parentId":"20220423215701-eorkz50","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[{"title":"消息发送⼀致性","id":"20220424152152-cggmsm0","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#消息发送⼀致性","parentId":"20220424152118-6uac32f","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[{"title":"常规MQ消息处理流程和特点","id":"20220424153236-47ri1pl","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#常规MQ消息处理流程和特点","parentId":"20220424152152-cggmsm0","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[],"level":8}],"level":7},{"title":"消息重复投递和业务幂等性","id":"20220424152200-0ncnon5","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#消息重复投递和业务幂等性","parentId":"20220424152118-6uac32f","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[],"level":7}],"level":6},{"title":"补偿型事务","id":"20220424153327-wt1eal3","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#补偿型事务","parentId":"20220423215701-eorkz50","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[{"title":"TCC 事务模型","id":"20220424195356-vie44sx","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#TCC 事务模型","parentId":"20220424153327-wt1eal3","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[{"title":"工作流程","id":"20220425132329-idymkg7","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#工作流程","parentId":"20220424195356-vie44sx","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[],"level":8}],"level":7},{"title":"TCC事务模型 VS DTP事务模型","id":"20220425204746-vxjja04","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#TCC事务模型 VS DTP事务模型","parentId":"20220424153327-wt1eal3","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[],"level":7},{"title":"Sega事务模型","id":"20220424195411-f3n90gn","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#Sega事务模型","parentId":"20220424153327-wt1eal3","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[{"title":"相关概念","id":"20220426111130-6ywhypq","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#相关概念","parentId":"20220424195411-f3n90gn","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[],"level":8},{"title":"组成部分","id":"20220426111254-5is2lcf","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#组成部分","parentId":"20220424195411-f3n90gn","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[],"level":8},{"title":"执⾏顺序","id":"20220426111355-qds8zxl","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#执⾏顺序","parentId":"20220424195411-f3n90gn","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[],"level":8},{"title":"恢复策略","id":"20220426111558-uz4vsur","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#恢复策略","parentId":"20220424195411-f3n90gn","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[],"level":8},{"title":"使用条件","id":"20220426140712-sp65fo9","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#使用条件","parentId":"20220424195411-f3n90gn","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[],"level":8},{"title":"对于ACID的保证","id":"20220426141244-4jza2t0","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#对于ACID的保证","parentId":"20220424195411-f3n90gn","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[],"level":8}],"level":7},{"title":"Saga和TCC对⽐","id":"20220426141416-9qybphm","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现#Saga和TCC对⽐","parentId":"20220424153327-wt1eal3","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/柔性事务的实现","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","children":[],"level":7}],"level":6}],"level":5}],"level":4},{"title":"总体的⽅案对⽐","id":"20220426143956-3oea8tm","type":"d","href":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/总体的⽅案对⽐","parentId":"","path":"/topic/分布式解决方案/数据调度/分布式事务/事务分类/总体的⽅案对⽐","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/事务分类","sort":3,"children":[],"level":4}],"level":3},{"title":"Seata框架","id":"20220426145647-ux209fp","type":"d","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架","parentId":"","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架","parentPath":"/topic/分布式解决方案/数据调度/分布式事务","sort":3,"children":[{"title":"Seata模块","id":"20220426152420-ajoches","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架#Seata模块","parentId":"20220426145647-ux209fp","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架","parentPath":"/topic/分布式解决方案/数据调度/分布式事务","children":[],"level":4},{"title":"Seata解决方案","id":"20220426160239-lc5rk4b","type":"d","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","parentId":"","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架","sort":2,"children":[{"title":"AT模式","id":"20220426155550-64bgf4n","type":"d","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/AT模式","parentId":"","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/AT模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","sort":1,"children":[{"title":"使用前提","id":"20220426155558-ub7wm27","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/AT模式#使用前提","parentId":"20220426155550-64bgf4n","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/AT模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[],"level":6},{"title":"整体机制","id":"20220426155652-aexc9fh","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/AT模式#整体机制","parentId":"20220426155550-64bgf4n","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/AT模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[],"level":6},{"title":"数据隔离性","id":"20220426155838-n38cpfv","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/AT模式#数据隔离性","parentId":"20220426155550-64bgf4n","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/AT模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[{"title":"写隔离","id":"20220426163905-xprvfiu","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/AT模式#写隔离","parentId":"20220426155838-n38cpfv","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/AT模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[],"level":7},{"title":"读隔离","id":"20220426163909-u8pc717","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/AT模式#读隔离","parentId":"20220426155838-n38cpfv","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/AT模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[],"level":7}],"level":6}],"level":5},{"title":"TCC模式","id":"20220426160034-fjyztju","type":"d","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/TCC模式","parentId":"","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/TCC模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","sort":2,"children":[{"title":"第⼀阶段 Try","id":"20220427100807-9m7182w","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/TCC模式#第⼀阶段 Try","parentId":"20220426160034-fjyztju","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/TCC模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[],"level":6},{"title":"第⼆阶段 Confirm","id":"20220427100921-tzronqk","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/TCC模式#第⼆阶段 Confirm","parentId":"20220426160034-fjyztju","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/TCC模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[],"level":6},{"title":"第⼆阶段 Cancel","id":"20220427101038-z7iyl90","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/TCC模式#第⼆阶段 Cancel","parentId":"20220426160034-fjyztju","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/TCC模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[],"level":6},{"title":"多个事务并发的情况","id":"20220427100807-4uemyxv","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/TCC模式#多个事务并发的情况","parentId":"20220426160034-fjyztju","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/TCC模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[],"level":6},{"title":"SpringCloud集成TCC","id":"20220427101406-ww6wp56","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/TCC模式#SpringCloud集成TCC","parentId":"20220426160034-fjyztju","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/TCC模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[{"title":"定义TCC接口","id":"20220427103444-0y0c4r2","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/TCC模式#定义TCC接口","parentId":"20220427101406-ww6wp56","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/TCC模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[],"level":7},{"title":"TCC接口的业务实现","id":"20220427103518-2w7qrfd","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/TCC模式#TCC接口的业务实现","parentId":"20220427101406-ww6wp56","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/TCC模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[],"level":7}],"level":6}],"level":5},{"title":"Sega模式","id":"20220426160053-48dfocz","type":"d","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/Sega模式","parentId":"","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/Sega模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","sort":3,"children":[{"title":"基于状态机引擎的 Saga 实现","id":"20220427110339-mlxwa7j","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/Sega模式#基于状态机引擎的 Saga 实现","parentId":"20220426160053-48dfocz","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/Sega模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[],"level":6},{"title":"springCloud seata saga接入指南","id":"20220427111111-cix2tpk","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/Sega模式#springCloud seata saga接入指南","parentId":"20220426160053-48dfocz","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/Sega模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[{"title":"配置状态机","id":"20220427111137-9vwxkss","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/Sega模式#配置状态机","parentId":"20220427111111-cix2tpk","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/Sega模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[],"level":7},{"title":"配置状态机引擎","id":"20220427111242-xo5yogv","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/Sega模式#配置状态机引擎","parentId":"20220427111111-cix2tpk","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/Sega模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[],"level":7},{"title":"状态机执行","id":"20220427111159-vkcgfzm","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/Sega模式#状态机执行","parentId":"20220427111111-cix2tpk","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/Sega模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[],"level":7}],"level":6}],"level":5},{"title":"XA模式","id":"20220426160059-gdxxs9l","type":"d","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/XA模式","parentId":"","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/XA模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","sort":4,"children":[{"title":"前提","id":"20220427111429-pypz051","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/XA模式#前提","parentId":"20220426160059-gdxxs9l","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/XA模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[],"level":6},{"title":"整体机制","id":"20220427111429-pc6llsu","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/XA模式#整体机制","parentId":"20220426160059-gdxxs9l","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/XA模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[],"level":6},{"title":"工作机制","id":"20220427111429-bafbod5","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/XA模式#工作机制","parentId":"20220426160059-gdxxs9l","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/XA模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[{"title":"1. 整体运行机制","id":"20220427111429-1be3rze","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/XA模式#1. 整体运行机制","parentId":"20220427111429-bafbod5","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/XA模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[],"level":7},{"title":"2. 数据源代理","id":"20220427111429-y739ajn","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/XA模式#2. 数据源代理","parentId":"20220427111429-bafbod5","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/XA模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[],"level":7},{"title":"3. 分支注册","id":"20220427111429-tbfzu5q","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/XA模式#3. 分支注册","parentId":"20220427111429-bafbod5","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/XA模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[],"level":7},{"title":"XA 模式的使用","id":"20220427111429-gskf5fh","type":"h","href":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/XA模式#XA 模式的使用","parentId":"20220427111429-bafbod5","path":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案/XA模式","parentPath":"/topic/分布式解决方案/数据调度/分布式事务/Seata框架/Seata解决方案","children":[],"level":7}],"level":6}],"level":5}],"level":4}],"level":3}],"level":2},{"title":"分布式锁","id":"20220429141850-irtgbjl","type":"d","href":"/topic/分布式解决方案/数据调度/分布式锁","parentId":"","path":"/topic/分布式解决方案/数据调度/分布式锁","parentPath":"/topic/分布式解决方案/数据调度","children":[],"level":2},{"title":"分布式ID","id":"20220429141909-i2lgsn3","type":"d","href":"/topic/分布式解决方案/数据调度/分布式ID","parentId":"","path":"/topic/分布式解决方案/数据调度/分布式ID","parentPath":"/topic/分布式解决方案/数据调度","children":[],"level":2}],"level":1},{"title":"服务治理","id":"20220429141922-rrjykjo","type":"d","href":"/topic/分布式解决方案/服务治理","parentId":"","path":"/topic/分布式解决方案/服务治理","parentPath":"/topic/分布式解决方案","sort":4,"children":[{"title":"服务注册和发现","id":"20220429141942-czxw4td","type":"d","href":"/topic/分布式解决方案/服务治理/服务注册和发现","parentId":"","path":"/topic/分布式解决方案/服务治理/服务注册和发现","parentPath":"/topic/分布式解决方案/服务治理","sort":1,"children":[],"level":2},{"title":"链路追踪","id":"20220429142025-xkfxvz1","type":"d","href":"/topic/分布式解决方案/服务治理/链路追踪","parentId":"","path":"/topic/分布式解决方案/服务治理/链路追踪","parentPath":"/topic/分布式解决方案/服务治理","sort":2,"children":[],"level":2},{"title":"服务监控","id":"20220429141957-p3p01fn","type":"d","href":"/topic/分布式解决方案/服务治理/服务监控","parentId":"","path":"/topic/分布式解决方案/服务治理/服务监控","parentPath":"/topic/分布式解决方案/服务治理","sort":3,"children":[],"level":2},{"title":"服务降级和熔断","id":"20220429142039-iiutoki","type":"d","href":"/topic/分布式解决方案/服务治理/服务降级和熔断","parentId":"","path":"/topic/分布式解决方案/服务治理/服务降级和熔断","parentPath":"/topic/分布式解决方案/服务治理","sort":4,"children":[],"level":2}],"level":1},{"title":"高并发架构","id":"20220505192249-oksx1to","type":"d","href":"/topic/分布式解决方案/高并发架构","parentId":"","path":"/topic/分布式解决方案/高并发架构","parentPath":"/topic/分布式解决方案","sort":5,"children":[],"level":1}],"level":0},"headings":[{"depth":1,"value":"TCC模式","slug":"tcc模式"},{"depth":1,"value":"第⼀阶段 Try","slug":"第阶段-try"},{"depth":1,"value":"第⼆阶段 Confirm","slug":"第阶段-confirm"},{"depth":1,"value":"第⼆阶段 Cancel","slug":"第阶段-cancel"},{"depth":1,"value":"多个事务并发的情况","slug":"多个事务并发的情况"},{"depth":1,"value":"SpringCloud集成TCC","slug":"springcloud集成tcc"},{"depth":3,"value":"定义TCC接口","slug":"定义tcc接口"},{"depth":3,"value":"TCC接口的业务实现","slug":"tcc接口的业务实现"}]}},
    "staticQueryHashes": ["630634786","928362550"]}