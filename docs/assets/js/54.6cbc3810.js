(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{358:function(t,v,_){"use strict";_.r(v);var e=_(6),a=Object(e.a)({},(function(){var t=this,v=t._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("p",[t._v("OMV 突然有一天磁盘爆满，简直莫名奇妙。")]),t._v(" "),v("p",[t._v("用"),v("code",[t._v("df -h")]),t._v("查询磁盘空间，已经将近满了")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://image.ztianzeng.com/uPic/20220808112337.png",alt:""}}),t._v("​")]),t._v(" "),v("p",[t._v("但是，在根目录下查询用"),v("code",[t._v("du -h --max-depth=1")]),t._v("查询，并没有发现任何的大文件。")]),t._v(" "),v("p",[t._v("突然想起来，有一天晚上断电，断电重启之后好像就这样了。")]),t._v(" "),v("p",[t._v("然后，将所有磁盘挂载都"),v("code",[t._v("umount")]),t._v("掉，保持最原始的状态")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://image.ztianzeng.com/uPic/20220808105503.png",alt:""}}),t._v("​")]),t._v(" "),v("p",[t._v("然后再在根目录运行"),v("code",[t._v("du -h --max-depth=1")]),t._v(" 果不其然，在挂载外部磁盘的目录找到的大文件，删除即可。")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://image.ztianzeng.com/uPic/20220808105454.png",alt:""}}),t._v("​")]),t._v(" "),v("h1",{attrs:{id:"总结"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),v("p",[t._v("查资料发现，在磁盘还没有被挂载到操作系统之前，文件都是写到根目录下。")]),t._v(" "),v("p",[t._v("以我目前这个来说，是由于Docker先启动进行了文件下载，对于Docker来说是无法感知到磁盘没有被挂载的，因此都写入到根目录的磁盘中，后面出现了磁盘报警才发现这个问题。")]),t._v(" "),v("p",[t._v("针对根目录这类离奇问题，在不确定哪里占用的时候，最好将所有的挂载都卸干净，再重新挂载。")]),t._v(" "),v("blockquote",[v("p",[t._v("在自己的电脑上可以这么玩，如果在服务器上，还是请教专业运维吧。")]),t._v(" "),v("p",[t._v("线上卸载磁盘，堪比核弹")])])])}),[],!1,null,null,null);v.default=a.exports}}]);