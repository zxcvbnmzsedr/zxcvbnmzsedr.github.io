(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{347:function(t,a,s){"use strict";s.r(a);var n=s(6),r=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"spring24"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring24"}},[t._v("#")]),t._v(" spring24")]),t._v(" "),a("h1",{attrs:{id:"全新的配置文件处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全新的配置文件处理"}},[t._v("#")]),t._v(" 全新的配置文件处理")]),t._v(" "),a("p",[t._v("我感觉最大的改变是提供了新的配置文件的加载方式，为了去适应k8s容器化部署中的configMap。")]),t._v(" "),a("p",[t._v("如果不想使用新的加载方式，依然提供了旧版的加载方式")]),t._v(" "),a("p",[t._v("引入依赖")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.cloud"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-cloud-starter-bootstrap"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("3.0.3"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("在配置文件中加上 spring.config.use-legacy-processing=true")]),t._v(" "),a("h2",{attrs:{id:"新版加载方式spring-config-import属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新版加载方式spring-config-import属性"}},[t._v("#")]),t._v(" 新版加载方式spring.config.import属性")]),t._v(" "),a("p",[t._v("spring.config.import属性可被视作这个版本最为牛逼的属性。")]),t._v(" "),a("p",[t._v("可以从不同的位置加载数据")]),t._v(" "),a("ol",[a("li",[t._v("加载classpath数据")])]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("spring.config.import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("optional:file:./dev.properties")]),t._v("\n")])])]),a("ol",[a("li",[t._v("加载文件系统的数据")])]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("spring.config.import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("file:/etc/config/myconfig[.yaml]")]),t._v("\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("加载Kubernetes的configMap(先将Kubernetes的数据挂载到卷轴上，然后在进行引用)\n"),a("a",{attrs:{href:"https://kubernetes.io/docs/concepts/configuration/secret/#using-secrets-as-files-from-a-pod",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何配置看这里"),a("OutboundLink")],1)])]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("spring.config.import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("optional:configtree:/etc/config/")]),t._v("\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[t._v("自定义加载数据，你可以通过自己喜欢的方式去从任意位置加载配置文件\n"),a("RouterLink",{attrs:{to:"/post/zai-spring24-zhong-shi-yong-nacosconfig/"}},[t._v("😃具体使用方式看这里")])],1)]),t._v(" "),a("h1",{attrs:{id:"新的版本描述方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新的版本描述方案"}},[t._v("#")]),t._v(" 新的版本描述方案")]),t._v(" "),a("p",[t._v("为了更加照顾英语非母语的开发者，spring采用了新的命名方案。")]),t._v(" "),a("p",[t._v("之前那套用英文命名的真的让人摸不着头脑，英语也就算了，还整些个不常用的生词。")]),t._v(" "),a("p",[t._v("单词的拼写很困难，版本号全靠复制。")]),t._v(" "),a("p",[t._v("而且版本号上面也难以看出版本向下兼容性，很难做出判断而做出风险预估。")]),t._v(" "),a("p",[t._v("为了解决这些问题")]),t._v(" "),a("p",[t._v("Spring采用了日历化版本，并且使用的规则/公式是YYYY.MINOR.MICRO[-MODIFIER]，")]),t._v(" "),a("h3",{attrs:{id:"对各部分解释如下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#对各部分解释如下"}},[t._v("#")]),t._v(" 对各部分解释如下：")]),t._v(" "),a("ul",[a("li",[t._v("YYYY：年份全称。eg：2020")]),t._v(" "),a("li",[t._v("MINOR：辅助版本号（一般升级些非主线功能），在当前年内从0递增")]),t._v(" "),a("li",[t._v("MICRO：补丁版本号（一般修复些bug），在当前年内从0递增")]),t._v(" "),a("li",[t._v("MODIFIER：非必填。后缀，它用于修饰一些关键节点，用这些字母表示")]),t._v(" "),a("li",[t._v("M数字：里程碑版本，如2020.0.0-M1、2020.0.0-M2")]),t._v(" "),a("li",[t._v("RC数字：发布候选版本，如2020.0.0-RC1、2020.0.0-RC2")]),t._v(" "),a("li",[t._v("SNAPSHOT：快照版本（后无数字），如2020.0.0-SNAPSHOT")]),t._v(" "),a("li",[t._v("啥都木有：正式版本（可放心使用，相当于之前的xxx-RELEASE），如2020.0.0")])]),t._v(" "),a("hr"),t._v(" "),a("h1",{attrs:{id:"r2dbc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#r2dbc"}},[t._v("#")]),t._v(" R2DBC")]),t._v(" "),a("p",[t._v("AR2dbcEntityTemplate可用于通过实体简化 Reactive R2DBC 的使用")]),t._v(" "),a("h1",{attrs:{id:"java-15-支持"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#java-15-支持"}},[t._v("#")]),t._v(" Java 15 支持")]),t._v(" "),a("p",[t._v("Spring Boot 2.4 现在完全支持（并针对）Java 15。支持的最低版本仍然是 Java 8。")]),t._v(" "),a("h1",{attrs:{id:"自定义属性名称支持"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义属性名称支持"}},[t._v("#")]),t._v(" 自定义属性名称支持")]),t._v(" "),a("p",[t._v("如果想注入的名称和java关键字想冲突可以使用@Name属性进行注入")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ConfigurationProperties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prefix "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sample"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ConstructorBinding")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SampleConfigurationProperties")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" importValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SampleConfigurationProperties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"import"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" importValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("importValue "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" importValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h1",{attrs:{id:"依赖升级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#依赖升级"}},[t._v("#")]),t._v(" 依赖升级")]),t._v(" "),a("ul",[a("li",[t._v("Spring AMQP 2.3")]),t._v(" "),a("li",[t._v("Spring Batch 4.")]),t._v(" "),a("li",[t._v("Spring Data 2020.0")]),t._v(" "),a("li",[t._v("Spring Framework 5.3")]),t._v(" "),a("li",[t._v("Spring Integration 5.4")]),t._v(" "),a("li",[t._v("Spring HATEOAS 1.2")]),t._v(" "),a("li",[t._v("Spring Kafka 2")]),t._v(" "),a("li",[t._v("Spring Retry 1.3")]),t._v(" "),a("li",[t._v("Spring Security 5.4")]),t._v(" "),a("li",[t._v("Spring Session 2020.0")])]),t._v(" "),a("p",[t._v("还更新了许多第三方依赖项：")]),t._v(" "),a("ul",[a("li",[t._v("Artemis 2.13")]),t._v(" "),a("li",[t._v("AssertJ 3.18")]),t._v(" "),a("li",[t._v("Cassandra Driver 4.7")]),t._v(" "),a("li",[t._v("Elasticsearch 7.9")]),t._v(" "),a("li",[t._v("Flyway 7")]),t._v(" "),a("li",[t._v("Jersey 2.31")]),t._v(" "),a("li",[t._v("JUnit 5.7")]),t._v(" "),a("li",[t._v("Liquibase 3.10")]),t._v(" "),a("li",[t._v("Lettuce 6.0")]),t._v(" "),a("li",[t._v("Micrometer 1.6")]),t._v(" "),a("li",[t._v("Mockito 3.4")]),t._v(" "),a("li",[t._v("MongoDB 4.1")]),t._v(" "),a("li",[t._v("Oracle Database 19.7")]),t._v(" "),a("li",[t._v("Reactor 2020.0")]),t._v(" "),a("li",[t._v("RSocket 1.1")]),t._v(" "),a("li",[t._v("Undertow 2.2")])])])}),[],!1,null,null,null);a.default=r.exports}}]);