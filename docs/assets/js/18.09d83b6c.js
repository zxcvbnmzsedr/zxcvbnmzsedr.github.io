(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{326:function(a,t,s){"use strict";s.r(t);var e=s(6),v=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"gatsby4-0升级"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gatsby4-0升级"}},[a._v("#")]),a._v(" Gatsby4.0升级")]),a._v(" "),t("p",[a._v("Gastby发布了4.0的版本，引入了巨大的性能改进。")]),a._v(" "),t("p",[a._v("最大的特点是最多减少40%的构建时间和两个新的渲染选项:延迟静态生成和服务端渲染。")]),a._v(" "),t("h1",{attrs:{id:"处理旧的依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#处理旧的依赖"}},[a._v("#")]),a._v(" 处理旧的依赖")]),a._v(" "),t("p",[a._v("在升级到V4版本之前，最好将所有的插件都升级到V3版本，这样可以竟可能避免出现问题。")]),a._v(" "),t("blockquote",[t("p",[a._v("可以通过"),t("code",[a._v("npm outdated")]),a._v(" 或者 "),t("code",[a._v("yarn upgrade-interactive")]),a._v("来自动升级到v3的版本")])]),a._v(" "),t("p",[a._v("升级好之后，运行"),t("code",[a._v("yarn buld")]),a._v("看看有没有什么问题，出现啥问题修复啥问题。")]),a._v(" "),t("h1",{attrs:{id:"安装最新的gatsby版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装最新的gatsby版本"}},[a._v("#")]),a._v(" 安装最新的Gatsby版本")]),a._v(" "),t("p",[a._v("直接通过命令安装最快乐。")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v(" yarn add gatsby"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@latest")]),a._v("\n")])])]),t("p",[a._v("运行玩之后，使用"),t("code",[a._v("yarn build")]),a._v(" 如果没有出现大问题的话，则升级成功")]),a._v(" "),t("h1",{attrs:{id:"更新插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更新插件"}},[a._v("#")]),a._v(" 更新插件")]),a._v(" "),t("p",[a._v("在升级完成之后，启动时会出现很多warning比如下面这样:")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("warn Plugin gatsby-plugin-react-helmet is not compatible with your gatsby version "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4.14")]),a._v(".1 - It requires gatsby@^3.0.0-next.0\nwarn Plugin gatsby-plugin-sitemap is not compatible with your gatsby version "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4.14")]),a._v(".1 - It requires gatsby@^3.0.0-next.0\n")])])]),t("p",[a._v("需要根据warning挨个升级依赖。")]),a._v(" "),t("p",[a._v("如果社区版的插件没有升级到最新，就没有办法了，只有等待社区更新。不过大部分情况下都不影响使用。")]),a._v(" "),t("h2",{attrs:{id:"遇到的问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#遇到的问题"}},[a._v("#")]),a._v(" 遇到的问题")]),a._v(" "),t("p",[a._v("目前我的博客只遇到了一个问题，id冲突。")]),a._v(" "),t("p",[a._v("在调用"),t("code",[a._v("createNode")]),a._v("的时候，之前的版本会将后创建id相同的话不会覆盖，新版本则会覆盖。")]),a._v(" "),t("p",[a._v("另外一个问题是，如果删除了"),t("code",[a._v("yarn.lock")]),a._v("会导致无法启动成功，因为对npm的依赖机制不是很了解，所以暂时先将"),t("code",[a._v("yarn.lock")]),a._v("进行上传跳过这个问题。")]),a._v(" "),t("p",[a._v("它会抛出一个"),t("code",[a._v("@parcel/source-map not found")]),a._v("的异常，是"),t("code",[a._v("@parcel/utils")]),a._v("中引用的，大概是版本可能有所偏差。")])])}),[],!1,null,null,null);t.default=v.exports}}]);