(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{322:function(v,a,_){"use strict";_.r(a);var s=_(6),e=Object(s.a)({},(function(){var v=this,a=v._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[a("h1",{attrs:{id:"å¼•è¨€"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¼•è¨€"}},[v._v("#")]),v._v(" å¼•è¨€")]),v._v(" "),a("p",[v._v("ä»Šå¤©æœ‹å‹é—®äº†æˆ‘ä¸€ä¸ªé¢è¯•é¢˜ï¼šJavaæœåŠ¡æ¯ä¸ªä¸€æ®µæ—¶é—´å°±ä¼šé‡å¯æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ")]),v._v(" "),a("p",[v._v("åˆšçœ‹åˆ°è¿™ä¸ªé—®é¢˜çš„æ—¶å€™ï¼Œä¸€ä¸‹å­æ²¡ååº”è¿‡æ¥ã€‚")]),v._v(" "),a("p",[v._v("å› ä¸ºå•ä»è¿›ç¨‹çš„è§’åº¦çœ‹ï¼Œé™¤éæœ‰å¤–éƒ¨çš„ç»å¸¸æ¥å¯¹Javaè¿›ç¨‹è¿›è¡Œä¸€ä¸ªä¿æ´»ï¼Œæ‰èƒ½å¤Ÿå®ç°è‡ªåŠ¨é‡å¯çš„åŠŸèƒ½ã€‚")]),v._v(" "),a("blockquote",[a("p",[v._v("å¸¸è§çš„ä¿æ´»æ‰‹æ®µå¸¸è§çš„å¤§æ¦‚æœ‰ä¸¤ç§ï¼š")]),v._v(" "),a("p",[v._v("ä¸€ç§é€šè¿‡Dockeræ‰“åŒ…æˆå®¹å™¨åˆ©ç”¨restartç­–ç•¥è¿›è¡Œä¿æ´»")]),v._v(" "),a("p",[v._v("å¦ä¸€ç§å°†Javaçš„å¯åŠ¨å‘½ä»¤æ³¨å†ŒæˆserviceæœåŠ¡ï¼Œåˆ©ç”¨linuxçš„serviceè¿›è¡Œä¿æ´»ã€‚")])]),v._v(" "),a("p",[v._v("æ‰€ä»¥ï¼Œè‡ªåŠ¨é‡å¯çš„é—®é¢˜å°±è½¬åŒ–ä¸º Javaè¿›è¡Œåœ¨ä½•æ—¶ä¼šè¢«æ€æ­»ï¼Ÿ")]),v._v(" "),a("p",[v._v("æ€æ­»çš„Javaä¹Ÿåˆ†ä¸ºä¸¤å¤§ç±»ï¼Œå†…éƒ¨åŠ›é‡å’Œå¤–éƒ¨åŠ›é‡ã€‚")]),v._v(" "),a("ul",[a("li",[a("p",[v._v("å†…éƒ¨åŠ›é‡æ˜¯Javaè‡ªèº«çš„ä¸šåŠ¡çš„ä»£ç å‡ºç°äº†é—®é¢˜ã€‚")])]),v._v(" "),a("li",[a("p",[v._v("å¤–éƒ¨åŠ›é‡æ˜¯æ“ä½œç³»ç»ŸæŠŠè¿›ç¨‹æ€æ­»äº†")])])]),v._v(" "),a("h1",{attrs:{id:"linuxçš„oom-killer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linuxçš„oom-killer"}},[v._v("#")]),v._v(" Linuxçš„OOM killer")]),v._v(" "),a("p",[v._v("OOM killeræ˜¯Linuxä¿éšœæ“ä½œç³»ç»Ÿå¹³ç¨³è¿è¡Œçš„ä¸€ä¸ªæœºåˆ¶ï¼Œä¸ä¼šç”±äºç”¨æˆ·è¿›ç¨‹æŠŠç³»ç»Ÿèµ„æºè€—å°½å¯¼è‡´æ“ä½œç³»ç»Ÿçš„å´©æºƒã€‚")]),v._v(" "),a("p",[v._v("åœ¨å½“ç‰©ç†å†…å­˜å’Œäº¤æ¢ç©ºé—´ä¸å¤Ÿç”¨æ—¶ï¼ŒOOM Killer å°±ä¼šé€‰æ‹©æ€æ­»è¿›ç¨‹ï¼ŒLinuxæ¯ä¸ªè¿›ç¨‹éƒ½è®°å½•äº†"),a("code",[v._v("oom_score")]),v._v("è¿™ä¸ªå€¼è®°å½•äº†æ¯ä¸ªPIDï¼ˆè¿›ç¨‹IDï¼‰è¢«æ“ä½œç³»ç»Ÿæ€æ‰çš„å…ˆåé¡ºåºï¼Œè¿™ä¸ªæ–‡ä»¶ä½äº"),a("code",[v._v("/proc/<pid>/oom_score")]),v._v("ã€‚")]),v._v(" "),a("p",[v._v("oom_score çš„å€¼æ˜¯ç”±å¾ˆå¤šå› ç´ å…±åŒå†³å®šçš„ï¼š")]),v._v(" "),a("ul",[a("li",[v._v("å¦‚æœè¿›ç¨‹æ¶ˆè€—çš„å†…å­˜è¶Šå¤§ï¼Œå®ƒçš„ oom_score é€šå¸¸ä¹Ÿä¼šè¶Šå¤§ã€‚")]),v._v(" "),a("li",[v._v("å¦‚æœè¿›ç¨‹è¿è¡Œäº†å¾ˆé•¿æ—¶é—´ï¼Œå¹¶ä¸”æ¶ˆè€—å¾ˆå¤š CPU æ—¶é—´ï¼Œé‚£ä¹ˆé€šå¸¸å®ƒçš„ oom_score ä¼šåå°ã€‚")]),v._v(" "),a("li",[v._v("å¦‚æœè¿›ç¨‹ä»¥ superuser çš„èº«ä»½è¿è¡Œï¼Œé‚£ä¹ˆå®ƒçš„ oom_score ä¹Ÿä¼šåå°ã€‚")])]),v._v(" "),a("p",[v._v("æ‰€ä»¥è¯´ï¼Œåœ¨Javaè¿›ç¨‹ä¸æ–­åœ°åƒå†…å­˜å’ŒCPUçš„æ—¶å€™ï¼Œ"),a("code",[v._v("oom_score")]),v._v("ä¹Ÿéšä¹‹å˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œæœ€åè¢«æ€æ‰ã€‚")]),v._v(" "),a("p",[v._v("è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡"),a("code",[v._v("dmesg")]),v._v("å‘½ä»¤è¿›è¡ŒæŸ¥è¯¢")]),v._v(" "),a("div",{staticClass:"language-dmesg extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[v._v("dmesg | grep java\n")])])]),a("p",[v._v("ä¹Ÿå¯ä»¥æ‰§è¡Œï¼Œä¸‹é¢è¿™ä¸ªå‘½ä»¤åˆ°æ—¥å¿—ä¸­æŸ¥è¯¢")]),v._v(" "),a("div",{staticClass:"language-dmesg extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[v._v("egrep -i 'killed process' /var/log/messages\n")])])]),a("h1",{attrs:{id:"ä¸šåŠ¡ä»£ç æ•…éšœ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸šåŠ¡ä»£ç æ•…éšœ"}},[v._v("#")]),v._v(" ä¸šåŠ¡ä»£ç æ•…éšœ")]),v._v(" "),a("p",[v._v("JVMå‘ç”Ÿè‡´å‘½é”™è¯¯å¯¼è‡´å´©æºƒæ—¶ï¼Œä¼šç”Ÿæˆä¸€ä¸ªhs_err_pid_xxx.logè¿™æ ·çš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åŒ…å«äº†å¯¼è‡´ JVM crash çš„é‡è¦ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ†æè¯¥æ–‡ä»¶å®šä½åˆ°å¯¼è‡´ JVM Crash çš„åŸå› ï¼Œä»è€Œä¿®å¤ä¿è¯ç³»ç»Ÿç¨³å®š")]),v._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[v._v("-XX:ErrorFile"),a("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),v._v("/var/log/hs_err_pid"),a("span",{pre:!0,attrs:{class:"token operator"}},[v._v("<")]),v._v("pid"),a("span",{pre:!0,attrs:{class:"token operator"}},[v._v(">")]),v._v(".log\n")])])]),a("p",[v._v("å½“ç„¶è¿™ä¸ªæ–‡ä»¶å·¨å¤æ‚ï¼ŒåŒ…å«JVMæ­»æ‰ä¹‹å‰çš„å„ç§ä¿¡æ¯ï¼Œè¿™ä¸ªæ–‡ä»¶çš„å†…å®¹ä»–ä¸»è¦æœ‰å¦‚ä¸‹å†…å®¹")]),v._v(" "),a("ul",[a("li",[v._v("æ—¥å¿—å¤´æ–‡ä»¶")]),v._v(" "),a("li",[v._v("å¯¼è‡´ crash çš„çº¿ç¨‹ä¿¡æ¯")]),v._v(" "),a("li",[v._v("æ‰€æœ‰çº¿ç¨‹ä¿¡æ¯")]),v._v(" "),a("li",[v._v("å®‰å…¨ç‚¹å’Œé”ä¿¡æ¯")]),v._v(" "),a("li",[v._v("å †ä¿¡æ¯")]),v._v(" "),a("li",[v._v("æœ¬åœ°ä»£ç ç¼“å­˜")]),v._v(" "),a("li",[v._v("ç¼–è¯‘äº‹ä»¶")]),v._v(" "),a("li",[v._v("gc ç›¸å…³è®°å½•")]),v._v(" "),a("li",[v._v("jvm å†…å­˜æ˜ å°„")]),v._v(" "),a("li",[v._v("jvm å¯åŠ¨å‚æ•°")]),v._v(" "),a("li",[v._v("æœåŠ¡å™¨ä¿¡æ¯")])]),v._v(" "),a("p",[v._v("ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¹Ÿä¸ä¼šä½¿ç”¨è¿™ä¸ªæ–‡ä»¶å»è¿›è¡Œåˆ†æï¼Œæ›´å¤šçš„æ˜¯æ‰“å°OOMçš„å´©æºƒæ—¥å¿—")]),v._v(" "),a("div",{staticClass:"language-dmesg extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[v._v("-XX:+HeapDumpOnOutOfMemoryError\n")])])]),a("p",[v._v("è¿™ä¸ªæ–‡ä»¶å°±æ¯”è¾ƒå¥½æ‡‚äº†ï¼Œç»™ä¸¢åˆ°VisualVMä¸­ å¾ˆå¿«å°±èƒ½å®šä½é—®é¢˜ã€‚")]),v._v(" "),a("h2",{attrs:{id:"æ€»ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[v._v("#")]),v._v(" æ€»ç»“")]),v._v(" "),a("p",[v._v("é’ˆå¯¹æœåŠ¡è¢«å¹²æ‰çš„é—®é¢˜å¯ä»¥å…ˆçœ‹æœ‰æ²¡æœ‰dumpæ—¥å¿—ï¼Œå†ç”¨dmesgå‘½ä»¤çœ‹æ˜¯ä¸æ˜¯æ“ä½œç³»ç»ŸæŠŠè¿›ç¨‹å¹²æ‰äº†ï¼Œéƒ½æŸ¥ä¸åˆ°å°±åªèƒ½å•ƒErrorFileäº†ã€‚")]),v._v(" "),a("p",[v._v("ğŸ‘‹ğŸ»ğŸ‘‹ğŸ»ğŸ‘‹ğŸ»")])])}),[],!1,null,null,null);a.default=e.exports}}]);